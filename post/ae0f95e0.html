<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>SpringMVC | 小肥龙吃大冰淇淋</title><meta name="keywords" content="SpringMVC"><meta name="author" content="小肥龙吃大冰淇淋"><meta name="copyright" content="小肥龙吃大冰淇淋"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="1 SpringMVC 概述三层架构      表现层：负责数据展示   业务层：负责业务处理  数据层：负责数据操作    MVC（Model View Controller），一种用于设计创建Web应用程序表现层的模式  Model（模型）：数据模型，用于封装数据   View（视图）：页面视图，用于展示数据    jsp   html  Controller（控制器）：处理用户交互的调度器，">
<meta property="og:type" content="article">
<meta property="og:title" content="SpringMVC">
<meta property="og:url" content="https://andice-cream.github.io/post/ae0f95e0.html">
<meta property="og:site_name" content="小肥龙吃大冰淇淋">
<meta property="og:description" content="1 SpringMVC 概述三层架构      表现层：负责数据展示   业务层：负责业务处理  数据层：负责数据操作    MVC（Model View Controller），一种用于设计创建Web应用程序表现层的模式  Model（模型）：数据模型，用于封装数据   View（视图）：页面视图，用于展示数据    jsp   html  Controller（控制器）：处理用户交互的调度器，">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://note-1259153703.cos.ap-nanjing.myqcloud.com/images/20211108212110.jpg">
<meta property="article:published_time" content="2021-12-08T07:27:00.000Z">
<meta property="article:modified_time" content="2022-11-27T09:16:41.785Z">
<meta property="article:author" content="小肥龙吃大冰淇淋">
<meta property="article:tag" content="SpringMVC">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://note-1259153703.cos.ap-nanjing.myqcloud.com/images/20211108212110.jpg"><link rel="shortcut icon" href="https://lvxueyangboke.oss-cn-beijing.aliyuncs.com/images/20210805191028.png"><link rel="canonical" href="https://andice-cream.github.io/post/ae0f95e0"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'SpringMVC',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-11-27 17:16:41'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const fontSizeVal = saveToLocal.get('global-font-size')
    if (fontSizeVal !== undefined) {
      document.documentElement.style.setProperty('--global-font-size', fontSizeVal + 'px')
    }
    
    const detectApple = () => {
      if (GLOBAL_CONFIG_SITE.isHome && /iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/LVXUEYANGTiger/blog@main/ali_icon.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/LVXUEYANGTiger/blog@main/mogai.css"><link rel="stylesheet" href="/css/custom.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/l-lin/font-awesome-animation/dist/font-awesome-animation.min.css"  media="defer" onload="this.media='all'"><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="小肥龙吃大冰淇淋" type="application/atom+xml">
</head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="wizard-scene"><div class="wizard-objects"><div class="wizard-square"></div><div class="wizard-circle"></div><div class="wizard-triangle"></div></div><div class="wizard"><div class="wizard-body"></div><div class="wizard-right-arm"><div class="wizard-right-hand"></div></div><div class="wizard-left-arm"><div class="wizard-left-hand"></div></div><div class="wizard-head"><div class="wizard-beard"></div><div class="wizard-face"><div class="wizard-adds"></div></div><div class="wizard-hat"><div class="wizard-hat-of-the-hat"></div><div class="wizard-four-point-star --first"></div><div class="wizard-four-point-star --second"></div><div class="wizard-four-point-star --third"></div></div></div></div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://note-1259153703.cos.ap-nanjing.myqcloud.com/blog/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">178</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">73</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">40</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw iconfont icon-shouyex"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw iconfont icon-zuixinwenzhang_huaban"></i><span> 找文章</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw iconfont icon-fenlei1"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw iconfont icon-biaoqian1"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw iconfont icon-shijianzhou"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw iconfont icon-shenghuo"></i><span> 生活</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/timeline/"><i class="fa-fw iconfont icon-shijianzhou"></i><span> 时间轴</span></a></li><li><a class="site-page child" href="/link/"><i class="fa-fw iconfont icon-lianjie"></i><span> 友人帐</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw iconfont icon-gerenzhongxin"></i><span> 关于笔者</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://note-1259153703.cos.ap-nanjing.myqcloud.com/images/20211108212110.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">小肥龙吃大冰淇淋</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw iconfont icon-shouyex"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw iconfont icon-zuixinwenzhang_huaban"></i><span> 找文章</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw iconfont icon-fenlei1"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw iconfont icon-biaoqian1"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw iconfont icon-shijianzhou"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw iconfont icon-shenghuo"></i><span> 生活</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/timeline/"><i class="fa-fw iconfont icon-shijianzhou"></i><span> 时间轴</span></a></li><li><a class="site-page child" href="/link/"><i class="fa-fw iconfont icon-lianjie"></i><span> 友人帐</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw iconfont icon-gerenzhongxin"></i><span> 关于笔者</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">SpringMVC</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-12-08T07:27:00.000Z" title="发表于 2021-12-08 15:27:00">2021-12-08</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-11-27T09:16:41.785Z" title="更新于 2022-11-27 17:16:41">2022-11-27</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/java%E5%AD%A6%E4%B9%A0/">java学习</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/java%E5%AD%A6%E4%B9%A0/SpringMVC/">SpringMVC</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">13.4k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>59分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="SpringMVC"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="1-SpringMVC-概述"><a href="#1-SpringMVC-概述" class="headerlink" title="1 SpringMVC 概述"></a>1 SpringMVC 概述</h1><p><strong>三层架构</strong>    </p>
<ul>
<li><p>表现层：负责数据展示</p>
</li>
<li><p> 业务层：负责业务处理</p>
</li>
<li><p>数据层：负责数据操作</p>
</li>
</ul>
<p><img src="https://note-1259153703.cos.ap-nanjing.myqcloud.com/images/20211208201725.png" alt="image-20200426174726083"></p>
<p>MVC（Model View Controller），一种用于设计创建Web应用程序表现层的模式</p>
<ul>
<li><p>Model（模型）：数据模型，用于封装数据</p>
</li>
<li><p> View（视图）：页面视图，用于展示数据</p>
</li>
</ul>
<ul>
<li>jsp  </li>
<li>html</li>
</ul>
<p>Controller（控制器）：处理用户交互的调度器，用于根据用户需求处理程序逻辑</p>
<ul>
<li>Servlet</li>
<li>SpringMVC</li>
</ul>
<p><img src="https://note-1259153703.cos.ap-nanjing.myqcloud.com/images/20211208201726.png" alt="image-20200426180210590">  </p>
<p><img src="https://note-1259153703.cos.ap-nanjing.myqcloud.com/images/20211208201727.png" alt="image-20200426180348299"></p>
<h1 id="2-入门案例"><a href="#2-入门案例" class="headerlink" title="2 入门案例"></a>2 入门案例</h1><h2 id="2-1-入门案例制作"><a href="#2-1-入门案例制作" class="headerlink" title="2.1 入门案例制作"></a>2.1 入门案例制作</h2><p>①导入SpringMVC相关坐标</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- servlet3.1规范的坐标 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--jsp坐标--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet.jsp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jsp-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--spring的坐标--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.9.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--spring web的坐标--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.9.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--springmvc的坐标--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.9.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>②定义表现层业务处理器Controller，并配置成spring的bean（等同于Servlet）</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;user mvc controller is running ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--扫描加载所有的控制类类--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.itheima&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>③web.xml中配置SpringMVC核心控制器，用于将请求转发到对应的具体业务处理器Controller中（等同于Servlet配置）</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath*:spring-mvc.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>④设定具体Controller的访问路径（等同于Servlet在web.xml中的配置）</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//设定当前方法的访问映射地址</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/save&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span></span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;user mvc controller is running ...&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>⑤设置返回页面  </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//设定当前方法的访问映射地址</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/save&quot;)</span></span><br><span class="line"><span class="comment">//设置当前方法返回值类型为String，用于指定请求完成后跳转的页面</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">save</span><span class="params">()</span></span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;user mvc controller is running ...&quot;</span>);</span><br><span class="line">    <span class="comment">//设定具体跳转的页面</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success.jsp&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="2-2-入门案例工作流程分析"><a href="#2-2-入门案例工作流程分析" class="headerlink" title="2.2 入门案例工作流程分析"></a>2.2 入门案例工作流程分析</h2><ul>
<li>服务器启动<ol>
<li>加载web.xml中DispatcherServlet</li>
<li>读取spring-mvc.xml中的配置，加载所有com.itheima包中所有标记为bean的类</li>
<li>读取bean中方法上方标注@RequestMapping的内容</li>
</ol>
</li>
<li>处理请求<ol>
<li>DispatcherServlet配置拦截所有请求 /</li>
<li>使用请求路径与所有加载的@RequestMapping的内容进行比对</li>
<li>执行对应的方法</li>
<li>根据方法的返回值在webapp目录中查找对应的页面并展示  </li>
</ol>
</li>
</ul>
<h2 id="2-3-SpringMVC-技术架构图"><a href="#2-3-SpringMVC-技术架构图" class="headerlink" title="2.3 SpringMVC 技术架构图"></a>2.3 SpringMVC 技术架构图</h2><p><img src="https://note-1259153703.cos.ap-nanjing.myqcloud.com/images/20211208201728.png" alt="image-20200426182959446"></p>
<p><img src="https://note-1259153703.cos.ap-nanjing.myqcloud.com/images/20211208201729.png" alt="image-20200426183024690"></p>
<ul>
<li>DispatcherServlet：前端控制器， 是整体流程控制的中心，由其调用其它组件处理用户的请求， 有<br>效的降低了组件间的耦合性</li>
<li>HandlerMapping：处理器映射器， 负责根据用户请求找到对应具体的Handler处理器</li>
<li>Handler：处理器，业务处理的核心类，通常由开发者编写，描述具体的业务</li>
<li>HandlAdapter：处理器适配器，通过它对处理器进行执行</li>
<li>View Resolver：视图解析器， 将处理结果生成View视图</li>
<li>View：视图，最终产出结果， 常用视图如jsp、 html  </li>
</ul>
<p><img src="https://note-1259153703.cos.ap-nanjing.myqcloud.com/images/20211208201730.png" alt="image-20200426183313406"></p>
<h1 id="3-基本配置"><a href="#3-基本配置" class="headerlink" title="3 基本配置"></a>3 基本配置</h1><h2 id="3-1-常规配置（Controller加载控制）"><a href="#3-1-常规配置（Controller加载控制）" class="headerlink" title="3.1 常规配置（Controller加载控制）"></a>3.1 常规配置（Controller加载控制）</h2><ul>
<li>SpringMVC的处理器对应的bean必须按照规范格式开发，未避免加入无效的bean可通过bean加载过滤器进<br>行包含设定或排除设定，表现层bean标注通常设定为@Controller  </li>
</ul>
<p><strong>xml方式</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.itheima&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:include-filter</span></span></span><br><span class="line"><span class="tag">                            <span class="attr">type</span>=<span class="string">&quot;annotation&quot;</span></span></span><br><span class="line"><span class="tag">                            <span class="attr">expression</span>=<span class="string">&quot;org.springframework.stereotype.Controller&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-1-1-静态资源加载"><a href="#3-1-1-静态资源加载" class="headerlink" title="3.1.1 静态资源加载"></a>3.1.1 静态资源加载</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--放行指定类型静态资源配置方式--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">mapping</span>=<span class="string">&quot;/img/**&quot;</span> <span class="attr">location</span>=<span class="string">&quot;/img/&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">mapping</span>=<span class="string">&quot;/js/**&quot;</span> <span class="attr">location</span>=<span class="string">&quot;/js/&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">mapping</span>=<span class="string">&quot;/css/**&quot;</span> <span class="attr">location</span>=<span class="string">&quot;/css/&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--SpringMVC提供的通用资源放行方式--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-1-2-中文乱码处理"><a href="#3-1-2-中文乱码处理" class="headerlink" title="3.1.2 中文乱码处理"></a>3.1.2 中文乱码处理</h3><p>  SpringMVC提供专用的中文字符过滤器，用于处理乱码问题  </p>
<p>  配置在 <strong>web.xml</strong> 里面</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--乱码处理过滤器，与Servlet中使用的完全相同，差异之处在于处理器的类由Spring提供--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="3-2-注解驱动"><a href="#3-2-注解驱动" class="headerlink" title="3.2 注解驱动"></a>3.2 注解驱动</h2><ul>
<li>  使用注解形式转化SpringMVC核心配置文件为配置类  </li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(value = &quot;com.itheima&quot;,includeFilters =</span></span><br><span class="line"><span class="meta">    @ComponentScan.Filter(type=FilterType.ANNOTATION,classes = &#123;Controller.class&#125;)</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringMVCConfiguration</span> <span class="keyword">implements</span> <span class="title">WebMvcConfigurer</span></span>&#123;</span><br><span class="line">    <span class="comment">//注解配置放行指定资源格式</span></span><br><span class="line"><span class="comment">//    @Override</span></span><br><span class="line"><span class="comment">//    public void addResourceHandlers(ResourceHandlerRegistry registry) &#123;</span></span><br><span class="line"><span class="comment">//        registry.addResourceHandler(&quot;/img/**&quot;).addResourceLocations(&quot;/img/&quot;);</span></span><br><span class="line"><span class="comment">//        registry.addResourceHandler(&quot;/js/**&quot;).addResourceLocations(&quot;/js/&quot;);</span></span><br><span class="line"><span class="comment">//        registry.addResourceHandler(&quot;/css/**&quot;).addResourceLocations(&quot;/css/&quot;);</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//注解配置通用放行资源的格式</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">configureDefaultServletHandling</span><span class="params">(DefaultServletHandlerConfigurer configurer)</span> </span>&#123;</span><br><span class="line">        configurer.enable();;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>  基于servlet3.0规范，自定义Servlet容器初始化配置类，加载SpringMVC核心配置类  </li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServletContainersInitConfig</span> <span class="keyword">extends</span> <span class="title">AbstractDispatcherServletInitializer</span> </span>&#123;</span><br><span class="line">    <span class="comment">//创建Servlet容器时，使用注解的方式加载SPRINGMVC配置类中的信息，并加载成WEB专用的			           //ApplicationContext对象</span></span><br><span class="line">    <span class="comment">//该对象放入了ServletContext范围，后期在整个WEB容器中可以随时获取调用</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> WebApplicationContext <span class="title">createServletApplicationContext</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        AnnotationConfigWebApplicationContext ctx = <span class="keyword">new</span> AnnotationConfigWebApplicationContext();</span><br><span class="line">        ctx.register(SpringMVCConfiguration.class);</span><br><span class="line">        <span class="keyword">return</span> ctx;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//注解配置映射地址方式，服务于SpringMVC的核心控制器DispatcherServlet</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> String[] getServletMappings() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> String[]&#123;<span class="string">&quot;/&quot;</span>&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> WebApplicationContext <span class="title">createRootApplicationContext</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//乱码处理作为过滤器，在servlet容器启动时进行配置，相关内容参看Servlet零配置相关课程</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onStartup</span><span class="params">(ServletContext servletContext)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onStartup(servletContext);</span><br><span class="line">        CharacterEncodingFilter cef = <span class="keyword">new</span> CharacterEncodingFilter();</span><br><span class="line">        cef.setEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        FilterRegistration.Dynamic registration = servletContext.addFilter(<span class="string">&quot;characterEncodingFilter&quot;</span>, cef);</span><br><span class="line">        registration.addMappingForUrlPatterns(EnumSet.of(DispatcherType.REQUEST,DispatcherType.FORWARD,DispatcherType.INCLUDE),<span class="keyword">false</span>,<span class="string">&quot;/*&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>  删除web.xml<br>  删除spring-mvc.xml  </p>
<h2 id="3-3小结"><a href="#3-3小结" class="headerlink" title="3.3小结"></a><strong>3.3小结</strong></h2><ul>
<li>基于servlet3.0规范，配置Servlet容器初始化配置类，初始化时加载SpringMVC配置类</li>
<li>转化SpringMVC核心配置文件</li>
<li>转化为注解（例如： spring处理器加载过滤）</li>
<li>转化为bean进行加载</li>
<li>按照标准接口进行开发并加载（例如：中文乱码处理、静态资源加载过滤）  </li>
</ul>
<h1 id="4-请求"><a href="#4-请求" class="headerlink" title="4 请求"></a>4 请求</h1><h2 id="4-1-普通类型参数传参"><a href="#4-1-普通类型参数传参" class="headerlink" title="4.1 普通类型参数传参"></a>4.1 普通类型参数传参</h2><p>  参数名与处理器方法形参名保持一致  </p>
<p>  访问URL： <a target="_blank" rel="noopener" href="http://localhost/requestParam1?name=itheima&amp;age=14">http://localhost/requestParam1?name=itheima&amp;age=14</a>  </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/requestParam1&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">requestParam1</span><span class="params">(String name ,String age)</span></span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;name=&quot;</span>+name+<span class="string">&quot;,age=&quot;</span>+age);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;page.jsp&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> <strong>@RequestParam</strong> 的使用</p>
<ul>
<li>类型： 形参注解</li>
<li>位置：处理器类中的方法形参前方</li>
<li>作用：绑定请求参数与对应处理方法形参间的关系  </li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/requestParam2&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">requestParam2</span><span class="params">(<span class="meta">@RequestParam(</span></span></span></span><br><span class="line"><span class="meta"><span class="params"><span class="function">                            name = &quot;userName&quot;,</span></span></span></span><br><span class="line"><span class="meta"><span class="params"><span class="function">                            required = true,</span></span></span></span><br><span class="line"><span class="meta"><span class="params"><span class="function">                            defaultValue = &quot;itheima&quot;)</span> String name)</span></span>&#123;</span><br><span class="line">    </span><br><span class="line">    System.out.println(<span class="string">&quot;name=&quot;</span>+name);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;page.jsp&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4-2-POJO类型参数传参"><a href="#4-2-POJO类型参数传参" class="headerlink" title="4.2 POJO类型参数传参"></a>4.2 POJO类型参数传参</h2><p>当POJO中使用简单类型属性时， 参数名称与POJO类属性名保持一致  </p>
<p>访问URL： <a target="_blank" rel="noopener" href="http://localhost/requestParam3?name=itheima&amp;age=14">http://localhost/requestParam3?name=itheima&amp;age=14</a>  </p>
<p><strong>Controller</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/requestParam3&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">requestParam3</span><span class="params">(User user)</span></span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;name=&quot;</span>+user.getName());</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;page.jsp&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>POJO类</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(Integer age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>参数冲突</strong></p>
<ul>
<li>当POJO类型属性与其他形参出现同名问题时，将被同时赋值</li>
<li>建议使用@RequestParam注解进行区分</li>
<li>访问URL： <a target="_blank" rel="noopener" href="http://localhost/requestParam4?name=itheima&amp;**age**=14">http://localhost/requestParam4?name=itheima&amp;**age**=14</a>  </li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/requestParam4&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">requestParam4</span><span class="params">(User user,String age)</span></span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;user.age=&quot;</span>+user.getAge()+<span class="string">&quot;,age=&quot;</span>+age);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;page.jsp&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>复杂POJO类型参数</strong></p>
<ul>
<li><p>当POJO中出现对象属性时，参数名称与对象层次结构名称保持一致  </p>
<p>访问URL： <a target="_blank" rel="noopener" href="http://localhost/requestParam5?address.province=beijing">http://localhost/requestParam5?address.province=beijing</a>  </p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Address address;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> Address <span class="title">getAddress</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAddress</span><span class="params">(Address address)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.address = address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(Integer age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/requestParam5&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">requestParam5</span><span class="params">(User user)</span></span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;user.address=&quot;</span>+user.getAddress().getProvince());</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;page.jsp&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://note-1259153703.cos.ap-nanjing.myqcloud.com/images/20211208201731.png" alt="image-20200426190932459"></p>
<p><strong>当POJO中出现List，保存对象数据，参数名称与对象层次结构名称保持一致，使用数组格式描述集合中对象的位置</strong>  </p>
<p>访问URL： <a target="_blank" rel="noopener" href="http://localhost/requestParam7?addresses%5B0%5D.province=bj&amp;addresses%5B1%5D.province=tj">http://localhost/requestParam7?addresses[0].province=bj&amp;addresses[1].province=tj</a>  </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Address&gt; addresses;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Address</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String province;</span><br><span class="line">    <span class="keyword">private</span> String city;</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/requestParam7&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">requestParam7</span><span class="params">(User user)</span></span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;user.addresses=&quot;</span>+user.getAddress());</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;page.jsp&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> <strong>当POJO中出现Map，保存对象数据，参数名称与对象层次结构名称保持一致，使用映射格式描述集合中对象的位置</strong>  </p>
<p> 访问URL： <a target="_blank" rel="noopener" href="http://localhost/requestParam8?addressMap%5B%E2%80%99home%E2%80%99%5D.province=bj&amp;addressMap%5B%E2%80%99job%E2%80%99%5D.province=tj">http://localhost/requestParam8?addressMap[’home’].province=bj&amp;addressMap[’job’].province=tj</a>  </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String,Address&gt; addressMap;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Address</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String province;</span><br><span class="line">    <span class="keyword">private</span> String city;</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/requestParam8&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">requestParam8</span><span class="params">(User user)</span></span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;user.addressMap=&quot;</span>+user.getAddressMap());</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;page.jsp&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4-3-数组与集合类型参数传参"><a href="#4-3-数组与集合类型参数传参" class="headerlink" title="4.3 数组与集合类型参数传参"></a>4.3 数组与集合类型参数传参</h2><p><strong>数组类型参数</strong></p>
<p>请求参数名与处理器方法形参名保持一致，且请求参数数量＞ 1个  </p>
<p>访问URL： <a target="_blank" rel="noopener" href="http://localhost/requestParam9?nick=Jockme&amp;nick=zahc">http://localhost/requestParam9?nick=Jockme&amp;nick=zahc</a>  </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/requestParam9&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">requestParam9</span><span class="params">(String[] nick)</span></span>&#123;</span><br><span class="line">    System.out.println(nick[<span class="number">0</span>]+<span class="string">&quot;,&quot;</span>+nick[<span class="number">1</span>]);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;page.jsp&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>集合类型参数</strong></p>
<ul>
<li>保存简单类型数据，请求参数名与处理器方法形参名保持一致，且请求参数数量＞ 1个</li>
<li>访问URL： <a target="_blank" rel="noopener" href="http://localhost/requestParam10?nick=Jockme&amp;nick=zahc">http://localhost/requestParam10?nick=Jockme&amp;nick=zahc</a></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/requestParam10&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">requestParam10</span><span class="params">(<span class="meta">@RequestParam(&quot;nick&quot;)</span> List&lt;String&gt; nick)</span></span>&#123;</span><br><span class="line">    System.out.println(nick);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;page.jsp&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>注意： SpringMVC默认将List作为对象处理，赋值前先创建对象，然后将nick作为对象的属性进行处理。由于</p>
</li>
<li><p>List是接口，无法创建对象，报无法找到构造方法异常；修复类型为可创建对象的ArrayList类型后，对象可</p>
</li>
<li><p>以创建，但没有nick属性，因此数据为空。此时需要告知SpringMVC的处理器nick是一组数据，而不是一个单</p>
</li>
<li><p>一数据。通过@RequestParam注解，将数量大于1个names参数打包成参数数组后， SpringMVC才能识别该数</p>
</li>
<li><p>据格式，并判定形参类型是否为数组或集合，并按数组或集合对象的形式操作数据。  </p>
</li>
</ul>
<h2 id="4-4-类型转换器"><a href="#4-4-类型转换器" class="headerlink" title="4.4 类型转换器"></a>4.4 类型转换器</h2><p>SpringMVC对接收的数据进行自动类型转换，该工作通过Converter接口实现  </p>
<p><img src="https://note-1259153703.cos.ap-nanjing.myqcloud.com/images/20211208201732.png" alt="image-20200426193801059"></p>
<p><strong>标量转换器</strong></p>
<ul>
<li>StringToBooleanConverter String→Boolean</li>
<li>ObjectToStringConverter Object→String</li>
<li>StringToNumberConverterFactory String→Number（ Integer、 Long等）</li>
<li>NumberToNumberConverterFactory Number子类型之间(Integer、 Long、 Double等)</li>
<li>StringToCharacterConverter String→java.lang.Character</li>
<li>NumberToCharacterConverter Number子类型(Integer、 Long、 Double等)→java.lang.Character</li>
<li>CharacterToNumberFactory java.lang.Character→Number子类型(Integer、 Long、 Double等)</li>
<li>StringToEnumConverterFactory String→enum类型</li>
<li>EnumToStringConverter enum类型→String</li>
<li>StringToLocaleConverter String→java.util.Local</li>
<li>PropertiesToStringConverter java.util.Properties→String</li>
<li>StringToPropertiesConverter String→java.util.Properties  </li>
</ul>
<p><strong>集合、数组相关转换器</strong></p>
<ul>
<li>ArrayToCollectionConverter 数组→集合（ List、 Set）</li>
<li>CollectionToArrayConverter 集合（ List、 Set） →数组</li>
<li>ArrayToArrayConverter 数组间</li>
<li>CollectionToCollectionConverter 集合间（ List、 Set）</li>
<li>MapToMapConverter Map间</li>
<li>ArrayToStringConverter 数组→String类型</li>
<li>StringToArrayConverter String→数组， trim后使用“,”split</li>
<li>ArrayToObjectConverter 数组→Object</li>
<li>ObjectToArrayConverter Object→单元素数组</li>
<li>CollectionToStringConverter 集合（ List、 Set） →String</li>
<li>StringToCollectionConverter String→集合（ List、 Set）， trim后使用“,”split</li>
<li>CollectionToObjectConverter 集合→Object</li>
<li>ObjectToCollectionConverter Object→单元素集合  </li>
</ul>
<p><strong>默认转换器</strong></p>
<ul>
<li>ObjectToObjectConverter Object间</li>
<li>IdToEntityConverter Id→Entity</li>
<li>FallbackObjectToStringConverter Object→String  </li>
</ul>
<p><strong>SpringMVC对接收的数据进行自动类型转换，该工作通过Converter接口实现</strong>  </p>
<p><img src="https://note-1259153703.cos.ap-nanjing.myqcloud.com/images/20211208201733.png" alt="image-20200426194106166"></p>
<h2 id="4-5-日期类型格式转换"><a href="#4-5-日期类型格式转换" class="headerlink" title="4.5 日期类型格式转换"></a>4.5 日期类型格式转换</h2><ul>
<li><p><strong>声明自定义的转换格式并覆盖系统转换格式</strong>  </p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--5.启用自定义Converter--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span> <span class="attr">conversion-service</span>=<span class="string">&quot;conversionService&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--1.设定格式类型Converter，注册为Bean，受SpringMVC管理--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;conversionService&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">class</span>=<span class="string">&quot;org.springframework.format.support.FormattingConversionServiceFactoryBean&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--2.自定义Converter格式类型设定，该设定使用的是同类型覆盖的思想--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;formatters&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--3.使用set保障相同类型的转换器仅保留一个，避免冲突--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--4.设置具体的格式类型--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.format.datetime.DateFormatter&quot;</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--5.类型规则--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;pattern&quot;</span> <span class="attr">value</span>=<span class="string">&quot;yyyy-MM-dd&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p><strong>日期类型格式转换（简化版）</strong></p>
<ul>
<li><p>名称： @DateTimeFormat</p>
</li>
<li><p>类型： 形参注解、成员变量注解</p>
</li>
<li><p>位置：形参前面 或 成员变量上方</p>
</li>
<li><p>作用：为当前参数或变量指定类型转换规则</p>
<p>范例：  </p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">requestParam12</span><span class="params">(<span class="meta">@DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;)</span> Date date)</span></span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;date=&quot;</span>+date);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;page.jsp&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;)</span></span><br><span class="line"><span class="keyword">private</span> Date birthday;</span><br></pre></td></tr></table></figure></li>
<li><p>注意：依赖注解驱动支持  </p>
<p>  &lt;mvc:annotation-driven /&gt;  </p>
</li>
</ul>
<h2 id="4-6-自定义类型转换器"><a href="#4-6-自定义类型转换器" class="headerlink" title="4.6 自定义类型转换器"></a>4.6 自定义类型转换器</h2><ul>
<li><p>自定义类型转换器，实现Converter接口，并制定转换前与转换后的类型</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--1.将自定义Converter注册为Bean，受SpringMVC管理--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;myDateConverter&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.converter.MyDateConverter&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--2.设定自定义Converter服务bean--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;conversionService&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">class</span>=<span class="string">&quot;org.springframework.context.support.ConversionServiceFactoryBean&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--3.注入所有的自定义Converter，该设定使用的是同类型覆盖的思想--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;converters&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--4.set保障同类型转换器仅保留一个，去重规则以Converter&lt;S,T&gt;的泛型为准--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--5.具体的类型转换器--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;myDateConverter&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//自定义类型转换器，实现Converter接口，接口中指定的泛型即为最终作用的条件</span></span><br><span class="line"><span class="comment">//本例中的泛型填写的是String，Date，最终出现字符串转日期时，该类型转换器生效</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyDateConverter</span> <span class="keyword">implements</span> <span class="title">Converter</span>&lt;<span class="title">String</span>, <span class="title">Date</span>&gt; </span>&#123;</span><br><span class="line">    <span class="comment">//重写接口的抽象方法，参数由泛型决定</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Date <span class="title">convert</span><span class="params">(String source)</span> </span>&#123;</span><br><span class="line">        DateFormat df = <span class="keyword">new</span> SimpleDateFormat(<span class="string">&quot;yyyy-MM-dd&quot;</span>);</span><br><span class="line">        Date date = <span class="keyword">null</span>;</span><br><span class="line">        <span class="comment">//类型转换器无法预计使用过程中出现的异常，因此必须在类型转换器内部捕获，不允许抛出，框架无法预计此类异常如何处理</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            date = df.parse(source);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ParseException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> date;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p><strong>通过注册自定义转换器，将该功能加入到SpringMVC的转换服务ConverterService中</strong>  </p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--开启注解驱动，加载自定义格式化转换器对应的类型转换服务--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span> <span class="attr">conversion-service</span>=<span class="string">&quot;conversionService&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="4-7-请求映射-RequestMapping"><a href="#4-7-请求映射-RequestMapping" class="headerlink" title="4.7 请求映射 @RequestMapping"></a>4.7 请求映射 @RequestMapping</h2><h3 id="4-7-1-方法注解"><a href="#4-7-1-方法注解" class="headerlink" title="4.7.1 方法注解"></a>4.7.1 方法注解</h3><ul>
<li>名称： @RequestMapping</li>
<li>类型： 方法注解 </li>
<li>位置：处理器类中的方法定义上方</li>
<li>作用：绑定请求地址与对应处理方法间的关系</li>
<li>范例：</li>
<li>访问路径： /requestURL1  </li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/requestURL2&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">requestURL2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;page.jsp&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-7-2-类注解"><a href="#4-7-2-类注解" class="headerlink" title="4.7.2 类注解"></a>4.7.2 类注解</h3><p><strong>名称： @RequestMapping</strong></p>
<ul>
<li>类型： 类注解</li>
<li>位置：处理器类定义上方</li>
<li>作用：为当前处理器中所有方法设定公共的访问路径前缀</li>
<li>范例：</li>
<li>访问路径： /user/requestURL1</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/requestURL2&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">requestURL2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;page.jsp&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<ul>
<li><p>常用属性</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(</span></span><br><span class="line"><span class="meta">    value=&quot;/requestURL3&quot;, //设定请求路径，与path属性、 value属性相同</span></span><br><span class="line"><span class="meta">    method = RequestMethod.GET, //设定请求方式</span></span><br><span class="line"><span class="meta">    params = &quot;name&quot;, //设定请求参数条件</span></span><br><span class="line"><span class="meta">    headers = &quot;content-type=text/*&quot;, //设定请求消息头条件</span></span><br><span class="line"><span class="meta">    consumes = &quot;text/*&quot;, //用于指定可以接收的请求正文类型（MIME类型）</span></span><br><span class="line"><span class="meta">    produces = &quot;text/*&quot; //用于指定可以生成的响应正文类型（MIME类型）</span></span><br><span class="line"><span class="meta">)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">requestURL3</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;/page.jsp&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="5-响应"><a href="#5-响应" class="headerlink" title="5 响应"></a>5 响应</h1><h2 id="5-1-页面跳转"><a href="#5-1-页面跳转" class="headerlink" title="5.1 页面跳转"></a>5.1 页面跳转</h2><ul>
<li>转发（默认）</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/showPage1&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">showPage1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;user mvc controller is running ...&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;forward:page.jsp&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li> 重定向</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/showPage2&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">showPage2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	System.out.println(<span class="string">&quot;user mvc controller is running ...&quot;</span>);	</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;redirect:page.jsp&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 注意：页面访问地址中所携带的   <strong>/</strong>  </p>
<h2 id="5-2-页面访问快捷设定-InternalResourceViewResolver"><a href="#5-2-页面访问快捷设定-InternalResourceViewResolver" class="headerlink" title="5.2 页面访问快捷设定 (InternalResourceViewResolver)"></a>5.2 页面访问快捷设定 (InternalResourceViewResolver)</h2><p>  展示页面的保存位置通常固定，且结构相似，可以设定通用的访问路径，简化页面配置格式  </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&lt;bean <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span>&gt;</span><br><span class="line">    &lt;property name=<span class="string">&quot;prefix&quot;</span> value=<span class="string">&quot;/WEB-INF/pages/&quot;</span>/&gt;</span><br><span class="line">    &lt;property name=<span class="string">&quot;suffix&quot;</span> value=<span class="string">&quot;.jsp&quot;</span>/&gt;</span><br><span class="line">/bean&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">showPage3</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;page&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>  <strong>如果未设定了返回值，使用void类型，则默认使用访问路径作页面地址的前缀后缀</strong>  </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//最简页面配置方式，使用访问路径作为页面名称，省略返回值</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/showPage5&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">showPage5</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;user mvc controller is running ...&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="5-3-带数据页面跳转"><a href="#5-3-带数据页面跳转" class="headerlink" title="5.3 带数据页面跳转"></a>5.3 带数据页面跳转</h2><ul>
<li>  方式一：使用HttpServletRequest类型形参进行数据传递  </li>
</ul>
  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/showPageAndData1&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">showPageAndData1</span><span class="params">(HttpServletRequest request)</span> </span>&#123;</span><br><span class="line">    request.setAttribute(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;itheima&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;page&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>  方式二：使用Model类型形参进行数据传递  </li>
</ul>
  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/showPageAndData2&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">showPageAndData2</span><span class="params">(Model model)</span> </span>&#123;</span><br><span class="line">    model.addAttribute(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;itheima&quot;</span>);</span><br><span class="line">    Book book = <span class="keyword">new</span> Book();</span><br><span class="line">    book.setName(<span class="string">&quot;SpringMVC入门实战&quot;</span>);</span><br><span class="line">    book.setPrice(<span class="number">66.6d</span>);</span><br><span class="line">    model.addAttribute(<span class="string">&quot;book&quot;</span>,book);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;page&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>  方式三：使用ModelAndView类型形参进行数据传递，将该对象作为返回值传递给调用者  </li>
</ul>
  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//使用ModelAndView形参传递参数，该对象还封装了页面信息</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/showPageAndData3&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ModelAndView <span class="title">showPageAndData3</span><span class="params">(ModelAndView modelAndView)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//ModelAndView mav = new ModelAndView();    替换形参中的参数</span></span><br><span class="line">    Book book  = <span class="keyword">new</span> Book();</span><br><span class="line">    book.setName(<span class="string">&quot;SpringMVC入门案例&quot;</span>);</span><br><span class="line">    book.setPrice(<span class="number">66.66d</span>);</span><br><span class="line">    <span class="comment">//添加数据的方式，key对value</span></span><br><span class="line">    modelAndView.addObject(<span class="string">&quot;book&quot;</span>,book);</span><br><span class="line">    <span class="comment">//添加数据的方式，key对value</span></span><br><span class="line">    modelAndView.addObject(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;Jockme&quot;</span>);</span><br><span class="line">    <span class="comment">//设置页面的方式，该方法最后一次执行的结果生效</span></span><br><span class="line">    modelAndView.setViewName(<span class="string">&quot;page&quot;</span>);</span><br><span class="line">    <span class="comment">//返回值设定成ModelAndView对象</span></span><br><span class="line">    <span class="keyword">return</span> modelAndView;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="5-4-返回json数据"><a href="#5-4-返回json数据" class="headerlink" title="5.4 返回json数据"></a>5.4 返回json数据</h2><ul>
<li>  方式一：基于response返回数据的简化格式，返回JSON数据  </li>
</ul>
  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//使用jackson进行json数据格式转化</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/showData3&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">showData3</span><span class="params">()</span> <span class="keyword">throws</span> JsonProcessingException </span>&#123;</span><br><span class="line">    Book book  = <span class="keyword">new</span> Book();</span><br><span class="line">    book.setName(<span class="string">&quot;SpringMVC入门案例&quot;</span>);</span><br><span class="line">    book.setPrice(<span class="number">66.66d</span>);</span><br><span class="line"></span><br><span class="line">    ObjectMapper om = <span class="keyword">new</span> ObjectMapper();</span><br><span class="line">    <span class="keyword">return</span> om.writeValueAsString(book);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>   使用SpringMVC提供的消息类型转换器将对象与集合数据自动转换为JSON数据    </li>
</ul>
  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//使用SpringMVC注解驱动，对标注@ResponseBody注解的控制器方法进行结果转换，由于返回值为引用类型，自动调用jackson提供的类型转换器进行格式转换</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/showData4&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Book <span class="title">showData4</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Book book  = <span class="keyword">new</span> Book();</span><br><span class="line">    book.setName(<span class="string">&quot;SpringMVC入门案例&quot;</span>);</span><br><span class="line">    book.setPrice(<span class="number">66.66d</span>);</span><br><span class="line">    <span class="keyword">return</span> book;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<pre><code>需要手工添加信息类型转换器  
</code></pre>
  <figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;messageConverters&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.http.converter.json.MappingJackson2HttpMessageConverter&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">&lt;/bean</span><br></pre></td></tr></table></figure>

<ul>
<li>  方式三：使用SpringMVC注解驱动简化配置  </li>
</ul>
  <figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--开启springmvc注解驱动，对@ResponseBody的注解进行格式增强，追加其类型转换的功能，具体实现由MappingJackson2HttpMessageConverter进行--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="6-Servlet相关接口-Servlet相关接口替换方案"><a href="#6-Servlet相关接口-Servlet相关接口替换方案" class="headerlink" title="6 Servlet相关接口-Servlet相关接口替换方案"></a>6 Servlet相关接口-Servlet相关接口替换方案</h1><p>  <strong>HttpServletRequest / HttpServletResponse / HttpSession</strong>  </p>
<ul>
<li>  <strong>SpringMVC提供访问原始Servlet接口API的功能，通过形参声明即可</strong>  </li>
</ul>
  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/servletApi&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">servletApi</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="params"><span class="function">                         HttpServletResponse response, HttpSession session)</span></span>&#123;</span><br><span class="line">    System.out.println(request);</span><br><span class="line">    System.out.println(response);</span><br><span class="line">    System.out.println(session);</span><br><span class="line">    request.setAttribute(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;itheima&quot;</span>);</span><br><span class="line">    System.out.println(request.getAttribute(<span class="string">&quot;name&quot;</span>));</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;page.jsp&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>  <strong>Head数据获取</strong>  </p>
</li>
<li><p>  名称： @RequestHeader</p>
</li>
<li><p>  类型： 形参注解</p>
</li>
<li><p>  位置：处理器类中的方法形参前方</p>
</li>
<li><p>  作用：绑定请求头数据与对应处理方法形参间的关系</p>
</li>
<li><p>  范例：</p>
</li>
</ul>
  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/headApi&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">headApi</span><span class="params">(<span class="meta">@RequestHeader(&quot;Accept-Language&quot;)</span> String head)</span></span>&#123;</span><br><span class="line">    System.out.println(head);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;page.jsp&quot;</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>Cookie数据获取</strong>  </p>
<ul>
<li>  名称： @CookieValue</li>
<li>  类型： 形参注解</li>
<li>  位置：处理器类中的方法形参前方</li>
<li>  作用：绑定请求Cookie数据与对应处理方法形参间的关系</li>
<li>  范例：</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/cookieApi&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">cookieApi</span><span class="params">(<span class="meta">@CookieValue(&quot;JSESSIONID&quot;)</span> String jsessionid)</span></span>&#123;</span><br><span class="line">    System.out.println(jsessionid);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;page.jsp&quot;</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure></li>
<li><p><strong>Session数据获取</strong>  </p>
<ul>
<li>  名称： @SessionAttribute</li>
<li>  类型： 形参注解</li>
<li>  位置：处理器类中的方法形参前方</li>
<li>  作用：绑定请求Session数据与对应处理方法形参间的关系</li>
<li>  范例：</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/sessionApi&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">sessionApi</span><span class="params">(<span class="meta">@SessionAttribute(&quot;name&quot;)</span> String name)</span></span>&#123;</span><br><span class="line">    System.out.println(name);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;page.jsp&quot;</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure></li>
<li><p><strong>Session数据设置（了解）</strong>  </p>
<ul>
<li>名称： @SessionAttributes</li>
<li>类型： 类注解</li>
<li>位置：处理器类上方</li>
<li>作用：声明放入session范围的变量名称，适用于Model类型数据传参</li>
<li>范例：</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@SessionAttributes(names=&#123;&quot;name&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServletController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/setSessionData2&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">setSessionDate2</span><span class="params">(Model model)</span> </span>&#123;</span><br><span class="line">        model.addAttribute(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;Jock2&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;page.jsp&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure></li>
<li><p><strong>注解式参数数据封装底层原理</strong>  </p>
<ul>
<li><p>数据的来源不同，对应的处理策略要进行区分</p>
</li>
<li><p>Head</p>
</li>
<li><p>Cookie</p>
</li>
<li><p>Session</p>
</li>
<li><p>SpringMVC使用策略模式进行处理分发</p>
</li>
<li><p>顶层接口： HandlerMethodArgumentResolver</p>
</li>
<li><p>实现类： ……  </p>
</li>
</ul>
</li>
</ul>
<h2 id="6-1-发送异步请求（回顾）"><a href="#6-1-发送异步请求（回顾）" class="headerlink" title="6.1 发送异步请求（回顾）"></a>6.1 发送异步请求（回顾）</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;a href=<span class="string">&quot;javascript:void(0);&quot;</span> id=<span class="string">&quot;testAjax&quot;</span>&gt;访问controller&lt;/a&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/js/jquery-3.3.1.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    $(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    $(<span class="string">&quot;#testAjax&quot;</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="comment">//为id=&quot;testAjax&quot;的组件绑定点击事件</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">        $.ajax(&#123; <span class="comment">//发送异步调用</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="attr">type</span>:<span class="string">&quot;POST&quot;</span>, <span class="comment">//请求方式： POST请求</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="attr">url</span>:<span class="string">&quot;ajaxController&quot;</span>, <span class="comment">//请求参数（也就是请求内容）</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="attr">data</span>:<span class="string">&#x27;ajax message&#x27;</span>, <span class="comment">//请求参数（也就是请求内容）</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="attr">dataType</span>:<span class="string">&quot;text&quot;</span>, <span class="comment">//响应正文类型</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="attr">contentType</span>:<span class="string">&quot;application/text&quot;</span>, <span class="comment">//请求正文的MIME类型</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">        &#125;);</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;);</span></span></span><br><span class="line"><span class="javascript"><span class="xml">&#125;);</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h2 id="6-2-接受异步请求参数"><a href="#6-2-接受异步请求参数" class="headerlink" title="6.2 接受异步请求参数"></a>6.2 接受异步请求参数</h2><ul>
<li><p>名称： @RequestBody</p>
</li>
<li><p>类型： 形参注解</p>
</li>
<li><p>位置：处理器类中的方法形参前方</p>
</li>
<li><p>作用：将异步提交数据组织成标准请求参数格式，并赋值给形参</p>
</li>
<li><p>范例：</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/ajaxController&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">ajaxController</span><span class="params">(<span class="meta">@RequestBody</span> String message)</span></span>&#123;</span><br><span class="line">    System.out.println(message);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;page.jsp&quot;</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<ul>
<li>注解添加到Pojo参数前方时，封装的异步提交数据按照Pojo的属性格式进行关系映射</li>
<li>注解添加到集合参数前方时，封装的异步提交数据按照集合的存储结构进行关系映射 </li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/ajaxPojoToController&quot;)</span></span><br><span class="line"><span class="comment">//如果处理参数是POJO，且页面发送的请求数据格式与POJO中的属性对应，@RequestBody注解可以自动映射对应请求数据到POJO中</span></span><br><span class="line"><span class="comment">//注意：POJO中的属性如果请求数据中没有，属性值为null，POJO中没有的属性如果请求数据中有，不进行映射</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String  <span class="title">ajaxPojoToController</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span></span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;controller pojo :&quot;</span>+user);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;page.jsp&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/ajaxListToController&quot;)</span></span><br><span class="line"><span class="comment">//如果处理参数是List集合且封装了POJO，且页面发送的数据是JSON格式的对象数组，数据将自动映射到集合参数中</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String  <span class="title">ajaxListToController</span><span class="params">(<span class="meta">@RequestBody</span> List&lt;User&gt; userList)</span></span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;controller list :&quot;</span>+userList);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;page.jsp&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6-3-异步请求接受响应数据"><a href="#6-3-异步请求接受响应数据" class="headerlink" title="6.3 异步请求接受响应数据"></a>6.3 异步请求接受响应数据</h2><ul>
<li>方法返回值为Pojo时，自动封装数据成json对象数据</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/ajaxReturnJson&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> User <span class="title">ajaxReturnJson</span><span class="params">()</span></span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;controller return json pojo...&quot;</span>);</span><br><span class="line">    User user = <span class="keyword">new</span> User();</span><br><span class="line">    user.setName(<span class="string">&quot;Jockme&quot;</span>);</span><br><span class="line">    user.setAge(<span class="number">40</span>);</span><br><span class="line">    <span class="keyword">return</span> user;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<ul>
<li>方法返回值为List时，自动封装数据成json对象数组数据  </li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/ajaxReturnJsonList&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="comment">//基于jackon技术，使用@ResponseBody注解可以将返回的保存POJO对象的集合转成json数组格式数据</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> List <span class="title">ajaxReturnJsonList</span><span class="params">()</span></span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;controller return json list...&quot;</span>);</span><br><span class="line">    User user1 = <span class="keyword">new</span> User();</span><br><span class="line">    user1.setName(<span class="string">&quot;Tom&quot;</span>);</span><br><span class="line">    user1.setAge(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">    User user2 = <span class="keyword">new</span> User();</span><br><span class="line">    user2.setName(<span class="string">&quot;Jerry&quot;</span>);</span><br><span class="line">    user2.setAge(<span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">    ArrayList al = <span class="keyword">new</span> ArrayList();</span><br><span class="line">    al.add(user1);</span><br><span class="line">    al.add(user2);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> al;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="7-异步请求-跨域访问"><a href="#7-异步请求-跨域访问" class="headerlink" title="7 异步请求-跨域访问"></a>7 异步请求-跨域访问</h1><h2 id="7-1-跨域访问介绍"><a href="#7-1-跨域访问介绍" class="headerlink" title="7.1 跨域访问介绍"></a>7.1 跨域访问介绍</h2><ul>
<li>当通过域名A下的操作访问域名B下的资源时，称为跨域访问</li>
<li>跨域访问时，会出现无法访问的现象   </li>
</ul>
<p><img src="https://note-1259153703.cos.ap-nanjing.myqcloud.com/images/20211208201800.png" alt="image-20200427162623591"></p>
<h2 id="7-2-跨域环境搭建"><a href="#7-2-跨域环境搭建" class="headerlink" title="7.2 跨域环境搭建"></a>7.2 跨域环境搭建</h2><ul>
<li>为当前主机添加备用域名<ul>
<li>修改windows安装目录中的host文件</li>
<li> 格式： ip 域名</li>
</ul>
</li>
<li>动态刷新DNS<ul>
<li> 命令： ipconfig /displaydns</li>
<li> 命令： ipconfig /flushdns   </li>
</ul>
</li>
</ul>
<h2 id="7-3-跨域访问支持"><a href="#7-3-跨域访问支持" class="headerlink" title="7.3 跨域访问支持"></a>7.3 跨域访问支持</h2><ul>
<li><p>名称： @CrossOrigin</p>
</li>
<li><p>类型： 方法注解 、 类注解</p>
</li>
<li><p>位置：处理器类中的方法上方 或 类上方</p>
</li>
<li><p>作用：设置当前处理器方法/处理器类中所有方法支持跨域访问</p>
</li>
<li><p>范例：  </p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/cross&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="comment">//使用@CrossOrigin开启跨域访问</span></span><br><span class="line"><span class="comment">//标注在处理器方法上方表示该方法支持跨域访问</span></span><br><span class="line"><span class="comment">//标注在处理器类上方表示该处理器类中的所有处理器方法均支持跨域访问</span></span><br><span class="line"><span class="meta">@CrossOrigin</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> User <span class="title">cross</span><span class="params">(HttpServletRequest request)</span></span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;controller cross...&quot;</span>+request.getRequestURL());</span><br><span class="line">    User user = <span class="keyword">new</span> User();</span><br><span class="line">    user.setName(<span class="string">&quot;Jockme&quot;</span>);</span><br><span class="line">    user.setAge(<span class="number">39</span>);</span><br><span class="line">    <span class="keyword">return</span> user;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="8-拦截器"><a href="#8-拦截器" class="headerlink" title="8 拦截器"></a>8 拦截器</h1><h2 id="8-1-拦截器概念"><a href="#8-1-拦截器概念" class="headerlink" title="8.1 拦截器概念"></a>8.1 拦截器概念</h2><ul>
<li>请求处理过程解析  </li>
</ul>
<p><img src="https://note-1259153703.cos.ap-nanjing.myqcloud.com/images/20211208201801.png" alt="image-20200427164038103"></p>
<ul>
<li>拦截器（ Interceptor）是一种动态拦截方法调用的机制</li>
</ul>
<p> 作用：</p>
<ul>
<li><p>在指定的方法调用前后执行预先设定后的的代码</p>
</li>
<li><p>阻止原始方法的执行</p>
</li>
</ul>
<p>核心原理： AOP思想<br> 拦截器链：多个拦截器按照一定的顺序，对原始被调用功能进行增强  </p>
<ul>
<li><strong>拦截器VS过滤器</strong><ul>
<li>归属不同： Filter属于Servlet技术， Interceptor属于SpringMVC技术</li>
<li>拦截内容不同： Filter对所有访问进行增强， Interceptor仅针对SpringMVC的访问进行增强  </li>
</ul>
<img src="https://note-1259153703.cos.ap-nanjing.myqcloud.com/images/20211208201802.png" alt="image-20200427164512745"></li>
</ul>
<h2 id="8-2-自定义拦截器开发过程"><a href="#8-2-自定义拦截器开发过程" class="headerlink" title="8.2 自定义拦截器开发过程"></a>8.2 自定义拦截器开发过程</h2><ul>
<li><p>实现HandlerInterceptor接口  </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//自定义拦截器需要实现HandleInterceptor接口</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyInterceptor</span> <span class="keyword">implements</span> <span class="title">HandlerInterceptor</span> </span>&#123;</span><br><span class="line">    <span class="comment">//处理器运行之前执行</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">preHandle</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="params"><span class="function">                             HttpServletResponse response,</span></span></span><br><span class="line"><span class="params"><span class="function">                             Object handler)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;前置运行----a1&quot;</span>);</span><br><span class="line">        <span class="comment">//返回值为false将拦截原始处理器的运行</span></span><br><span class="line">        <span class="comment">//如果配置多拦截器，返回值为false将终止当前拦截器后面配置的拦截器的运行</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//处理器运行之后执行</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">postHandle</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="params"><span class="function">                           HttpServletResponse response,</span></span></span><br><span class="line"><span class="params"><span class="function">                           Object handler,</span></span></span><br><span class="line"><span class="params"><span class="function">                           ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;后置运行----b1&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//所有拦截器的后置执行全部结束后，执行该操作</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterCompletion</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="params"><span class="function">                                HttpServletResponse response,</span></span></span><br><span class="line"><span class="params"><span class="function">                                Object handler,</span></span></span><br><span class="line"><span class="params"><span class="function">                                Exception ex)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;完成运行----c1&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//三个方法的运行顺序为    preHandle -&gt; postHandle -&gt; afterCompletion</span></span><br><span class="line">    <span class="comment">//如果preHandle返回值为false，三个方法仅运行preHandle</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>  配置拦截器  </p>
</li>
</ul>
<p>  配置拦截器  </p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">&quot;/showPage&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.interceptor.MyInterceptor&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>  <u>注意：配置顺序为先配置执行位置，后配置执行类</u>  </p>
<h2 id="8-3-拦截器执行流程"><a href="#8-3-拦截器执行流程" class="headerlink" title="8.3 拦截器执行流程"></a>8.3 拦截器执行流程</h2><p><img src="https://note-1259153703.cos.ap-nanjing.myqcloud.com/images/20211208201803.png" alt="image-20200427164840131"></p>
<h2 id="8-4-拦截器配置与方法参数"><a href="#8-4-拦截器配置与方法参数" class="headerlink" title="8.4 拦截器配置与方法参数"></a>8.4 拦截器配置与方法参数</h2><h3 id="8-4-1-前置处理方法"><a href="#8-4-1-前置处理方法" class="headerlink" title="8.4.1 前置处理方法"></a>8.4.1 前置处理方法</h3><p>原始方法之前运行</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">preHandle</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="params"><span class="function">                         HttpServletResponse response,</span></span></span><br><span class="line"><span class="params"><span class="function">                         Object handler)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;preHandle&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>参数</p>
<ul>
<li>request:请求对象</li>
<li>response:响应对象</li>
<li>handler:被调用的处理器对象，本质上是一个方法对象，对反射中的Method对象进行了再包装</li>
</ul>
</li>
<li><p>返回值</p>
<ul>
<li>返回值为false，被拦截的处理器将不执行  </li>
</ul>
</li>
</ul>
<h3 id="8-4-2-后置处理方法"><a href="#8-4-2-后置处理方法" class="headerlink" title="8.4.2   后置处理方法"></a>8.4.2   后置处理方法</h3><p>原始方法运行后运行，如果原始方法被拦截，则不执行  </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">postHandle</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="params"><span class="function">                       HttpServletResponse response,</span></span></span><br><span class="line"><span class="params"><span class="function">                       Object handler,</span></span></span><br><span class="line"><span class="params"><span class="function">                       ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;postHandle&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>参数</p>
<p>  modelAndView:如果处理器执行完成具有返回结果，可以读取到对应数据与页面信息，并进行调整  </p>
</li>
</ul>
<h3 id="8-4-3-完成处理方法"><a href="#8-4-3-完成处理方法" class="headerlink" title="8.4.3 完成处理方法"></a>8.4.3 完成处理方法</h3><p>  拦截器最后执行的方法，无论原始方法是否执行  </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterCompletion</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="params"><span class="function">                            HttpServletResponse response,</span></span></span><br><span class="line"><span class="params"><span class="function">                            Object handler,</span></span></span><br><span class="line"><span class="params"><span class="function">                            Exception ex)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;afterCompletion&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>参数</p>
<p>  ex:如果处理器执行过程中出现异常对象，可以针对异常情况进行单独处理  </p>
</li>
</ul>
<h2 id="8-5-拦截器配置项"><a href="#8-5-拦截器配置项" class="headerlink" title="8.5 拦截器配置项"></a>8.5 拦截器配置项</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--开启具体的拦截器的使用，可以配置多个--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--设置拦截器的拦截路径，支持*通配--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--/**         表示拦截所有映射--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--/*          表示拦截所有/开头的映射--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--/user/*     表示拦截所有/user/开头的映射--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--/user/add*  表示拦截所有/user/开头，且具体映射名称以add开头的映射--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--/user/*All  表示拦截所有/user/开头，且具体映射名称以All结尾的映射--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">&quot;/*&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">&quot;/**&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">&quot;/handleRun*&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--设置拦截排除的路径，配置/**或/*，达到快速配置的目的--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mvc:exclude-mapping</span> <span class="attr">path</span>=<span class="string">&quot;/b*&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--指定具体的拦截器类--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;MyInterceptor&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="8-6-多拦截器配置"><a href="#8-6-多拦截器配置" class="headerlink" title="8.6 多拦截器配置"></a>8.6 多拦截器配置</h2><p><img src="https://note-1259153703.cos.ap-nanjing.myqcloud.com/images/20211208201804.png" alt="image-20200427171422781"></p>
<p><strong>责任链模式</strong></p>
<ul>
<li><p>责任链模式是一种行为模式</p>
<p>  特征：</p>
<ul>
<li>沿着一条预先设定的任务链顺序执行，每个节点具有独立的工作任务</li>
</ul>
</li>
<li><p>优势：</p>
<ul>
<li>独立性：只关注当前节点的任务，对其他任务直接放行到下一节点</li>
<li>隔离性：具备链式传递特征，无需知晓整体链路结构，只需等待请求到达后进行处理即可</li>
<li>灵活性：可以任意修改链路结构动态新增或删减整体链路责任</li>
<li>解耦：将动态任务与原始任务解耦</li>
</ul>
<p>  弊端：</p>
<ul>
<li>链路过长时，处理效率低下</li>
<li>可能存在节点上的循环引用现象，造成死循环，导致系统崩溃  </li>
</ul>
</li>
</ul>
<h1 id="9-异常处理"><a href="#9-异常处理" class="headerlink" title="9 异常处理"></a>9 异常处理</h1><h2 id="9-1-异常处理器"><a href="#9-1-异常处理器" class="headerlink" title="9.1 异常处理器"></a>9.1 异常处理器</h2><p>  <strong>HandlerExceptionResolver</strong>接口（异常处理器）  </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExceptionResolver</span> <span class="keyword">implements</span> <span class="title">HandlerExceptionResolver</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ModelAndView <span class="title">resolveException</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="params"><span class="function">                                         HttpServletResponse response,</span></span></span><br><span class="line"><span class="params"><span class="function">                                         Object handler,</span></span></span><br><span class="line"><span class="params"><span class="function">                                         Exception ex)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;异常处理器正在执行中&quot;</span>);</span><br><span class="line">        ModelAndView modelAndView = <span class="keyword">new</span> ModelAndView();</span><br><span class="line">        <span class="comment">//定义异常现象出现后，反馈给用户查看的信息</span></span><br><span class="line">        modelAndView.addObject(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;出错啦！ &quot;</span>);</span><br><span class="line">        <span class="comment">//定义异常现象出现后，反馈给用户查看的页面</span></span><br><span class="line">        modelAndView.setViewName(<span class="string">&quot;error.jsp&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> modelAndView;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>  根据异常的种类不同，进行分门别类的管理，返回不同的信息  </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExceptionResolver</span> <span class="keyword">implements</span> <span class="title">HandlerExceptionResolver</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ModelAndView <span class="title">resolveException</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="params"><span class="function">                                         HttpServletResponse response,</span></span></span><br><span class="line"><span class="params"><span class="function">                                         Object handler,</span></span></span><br><span class="line"><span class="params"><span class="function">                                         Exception ex)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;my exception is running ....&quot;</span>+ex);</span><br><span class="line">        ModelAndView modelAndView = <span class="keyword">new</span> ModelAndView();</span><br><span class="line">        <span class="keyword">if</span>( ex <span class="keyword">instanceof</span> NullPointerException)&#123;</span><br><span class="line">            modelAndView.addObject(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;空指针异常&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> ( ex <span class="keyword">instanceof</span>  ArithmeticException)&#123;</span><br><span class="line">            modelAndView.addObject(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;算数运算异常&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            modelAndView.addObject(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;未知的异常&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        modelAndView.setViewName(<span class="string">&quot;error.jsp&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> modelAndView;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="9-2-注解开发异常处理器"><a href="#9-2-注解开发异常处理器" class="headerlink" title="9.2 注解开发异常处理器"></a>9.2 注解开发异常处理器</h2><ul>
<li><p>使用注解实现异常分类管理</p>
<ul>
<li><p>名称： @ControllerAdvice</p>
</li>
<li><p>类型： 类注解</p>
</li>
<li><p>位置：异常处理器类上方</p>
</li>
<li><p>作用：设置当前类为异常处理器类<br>范例：</p>
</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExceptionAdvice</span> </span>&#123;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<ul>
<li><p>使用注解实现异常分类管理</p>
<ul>
<li><p>名称： @ExceptionHandler</p>
</li>
<li><p>类型： 方法注解</p>
</li>
<li><p>位置：异常处理器类中针对指定异常进行处理的方法上方</p>
</li>
<li><p>作用：设置指定异常的处理方式</p>
<p>范例：</p>
<p>说明：处理器方法可以设定多个</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@ExceptionHandler(Exception.class)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">doOtherException</span><span class="params">(Exception ex)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;出错啦，请联系管理员！ &quot;</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h2 id="9-3-异常处理解决方案"><a href="#9-3-异常处理解决方案" class="headerlink" title="9.3 异常处理解决方案"></a>9.3 异常处理解决方案</h2><ul>
<li>异常处理方案<ul>
<li>业务异常：<ul>
<li>发送对应消息传递给用户，提醒规范操作</li>
</ul>
</li>
<li>系统异常：<ul>
<li>发送固定消息传递给用户，安抚用户</li>
<li>发送特定消息给运维人员，提醒维护</li>
<li>记录日志</li>
</ul>
</li>
<li>其他异常：<ul>
<li>发送固定消息传递给用户，安抚用户</li>
<li>发送特定消息给编程人员，提醒维护</li>
<li>纳入预期范围内</li>
<li>记录日志  </li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="9-4-自定义异常"><a href="#9-4-自定义异常" class="headerlink" title="9.4 自定义异常"></a>9.4 自定义异常</h2><ul>
<li><p>异常定义格式</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//自定义异常继承RuntimeException，覆盖父类所有的构造方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BusinessException</span> <span class="keyword">extends</span> <span class="title">RuntimeException</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BusinessException</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BusinessException</span><span class="params">(String message)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(message);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BusinessException</span><span class="params">(String message, Throwable cause)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(message, cause);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BusinessException</span><span class="params">(Throwable cause)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(cause);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BusinessException</span><span class="params">(String message, Throwable cause, <span class="keyword">boolean</span> enableSuppression, <span class="keyword">boolean</span> writableStackTrace)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(message, cause, enableSuppression, writableStackTrace);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>异常触发方式</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span>(user.getName().trim().length()&lt;<span class="number">4</span>) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> BusinessException(<span class="string">&quot;用户名长度必须在2-4位之间，请重新输入！ &quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>通过自定义异常将所有的异常现象进行分类管理，以统一的格式对外呈现异常消息  </p>
</li>
</ul>
<h1 id="10-实用技术"><a href="#10-实用技术" class="headerlink" title="10 实用技术"></a>10 实用技术</h1><h2 id="10-1-文件上传下载"><a href="#10-1-文件上传下载" class="headerlink" title="10.1 文件上传下载"></a>10.1 文件上传下载</h2><ul>
<li><p>上传文件过程分析  </p>
<p><img src="https://note-1259153703.cos.ap-nanjing.myqcloud.com/images/20211208201805.png" alt="image-20200427174442939"></p>
</li>
<li><p>  MultipartResolver接口  </p>
</li>
<li><p> MultipartResolver接口定义了文件上传过程中的相关操作，并对通用性操作进行了封装</p>
</li>
<li><p>MultipartResolver接口底层实现类CommonsMultipartResovler</p>
</li>
<li><p>CommonsMultipartResovler并未自主实现文件上传下载对应的功能，而是调用了apache的文件上传下载组件  </p>
</li>
</ul>
  <figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>文件上传下载实现</p>
<ul>
<li>  页面表单  </li>
</ul>
  <figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/fileupload&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">enctype</span>=<span class="string">&quot;multipart/form-data&quot;</span>&gt;</span></span><br><span class="line">    上传LOGO： <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;file&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;上传&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>  SpringMVC配置  </li>
</ul>
  <figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;multipartResolver&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>  控制器  </li>
</ul>
  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/fileupload&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fileupload</span><span class="params">(MultipartFile file)</span></span>&#123;</span><br><span class="line">    file.transferTo(<span class="keyword">new</span> File(<span class="string">&quot;file.png&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="10-2-文件上传注意事项"><a href="#10-2-文件上传注意事项" class="headerlink" title="10.2 文件上传注意事项"></a>10.2 文件上传注意事项</h2><ol>
<li>文件命名问题， 获取上传文件名，并解析文件名与扩展名</li>
<li>文件名过长问题</li>
<li>文件保存路径</li>
<li>重名问题</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/fileupload&quot;)</span></span><br><span class="line"><span class="comment">//参数中定义MultipartFile参数，用于接收页面提交的type=file类型的表单，要求表单名称与参数名相同</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">fileupload</span><span class="params">(MultipartFile file,MultipartFile file1,MultipartFile file2, HttpServletRequest request)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;file upload is running ...&quot;</span>+file);</span><br><span class="line">    <span class="comment">//        MultipartFile参数中封装了上传的文件的相关信息</span></span><br><span class="line">    <span class="comment">//        System.out.println(file.getSize());</span></span><br><span class="line">    <span class="comment">//        System.out.println(file.getBytes().length);</span></span><br><span class="line">    <span class="comment">//        System.out.println(file.getContentType());</span></span><br><span class="line">    <span class="comment">//        System.out.println(file.getName());</span></span><br><span class="line">    <span class="comment">//        System.out.println(file.getOriginalFilename());</span></span><br><span class="line">    <span class="comment">//        System.out.println(file.isEmpty());</span></span><br><span class="line">    <span class="comment">//首先判断是否是空文件，也就是存储空间占用为0的文件</span></span><br><span class="line">    <span class="keyword">if</span>(!file.isEmpty())&#123;</span><br><span class="line">        <span class="comment">//如果大小在范围要求内正常处理，否则抛出自定义异常告知用户（未实现）</span></span><br><span class="line">        <span class="comment">//获取原始上传的文件名，可以作为当前文件的真实名称保存到数据库中备用</span></span><br><span class="line">        String fileName = file.getOriginalFilename();</span><br><span class="line">        <span class="comment">//设置保存的路径</span></span><br><span class="line">        String realPath = request.getServletContext().getRealPath(<span class="string">&quot;/images&quot;</span>);</span><br><span class="line">        <span class="comment">//保存文件的方法，指定保存的位置和文件名即可，通常文件名使用随机生成策略产生，避免文件名冲突问题</span></span><br><span class="line">        file.transferTo(<span class="keyword">new</span> File(realPath,file.getOriginalFilename()));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//测试一次性上传多个文件</span></span><br><span class="line">    <span class="keyword">if</span>(!file1.isEmpty())&#123;</span><br><span class="line">        String fileName = file1.getOriginalFilename();</span><br><span class="line">        <span class="comment">//可以根据需要，对不同种类的文件做不同的存储路径的区分，修改对应的保存位置即可</span></span><br><span class="line">        String realPath = request.getServletContext().getRealPath(<span class="string">&quot;/images&quot;</span>);</span><br><span class="line">        file1.transferTo(<span class="keyword">new</span> File(realPath,file1.getOriginalFilename()));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(!file2.isEmpty())&#123;</span><br><span class="line">        String fileName = file2.getOriginalFilename();</span><br><span class="line">        String realPath = request.getServletContext().getRealPath(<span class="string">&quot;/images&quot;</span>);</span><br><span class="line">        file2.transferTo(<span class="keyword">new</span> File(realPath,file2.getOriginalFilename()));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;page.jsp&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="10-3-Restful风格配置"><a href="#10-3-Restful风格配置" class="headerlink" title="10.3 Restful风格配置"></a>10.3 Restful风格配置</h2><h3 id="10-3-1-Rest"><a href="#10-3-1-Rest" class="headerlink" title="10.3.1 Rest"></a>10.3.1 Rest</h3><ul>
<li>Rest（ REpresentational State Transfer） 一种网络资源的访问风格，定义了网络资源的访问方式<ul>
<li>传统风格访问路径<br> <a target="_blank" rel="noopener" href="http://localhost/user/get?id=1">http://localhost/user/get?id=1</a><br> <a target="_blank" rel="noopener" href="http://localhost/deleteUser?id=1">http://localhost/deleteUser?id=1</a></li>
<li>Rest风格访问路径<br> <a target="_blank" rel="noopener" href="http://localhost/user/1">http://localhost/user/1</a></li>
</ul>
</li>
<li>Restful是按照Rest风格访问网络资源</li>
<li>优点<ul>
<li>隐藏资源的访问行为，通过地址无法得知做的是何种操作</li>
<li>书写简化</li>
</ul>
</li>
</ul>
<h3 id="10-3-2-Rest行为约定方式"><a href="#10-3-2-Rest行为约定方式" class="headerlink" title="10.3.2 Rest行为约定方式"></a>10.3.2 Rest行为约定方式</h3><ul>
<li><p>GET（查询） <a target="_blank" rel="noopener" href="http://localhost/user/1">http://localhost/user/1</a> GET</p>
</li>
<li><p>POST（保存） <a target="_blank" rel="noopener" href="http://localhost/user">http://localhost/user</a> POST</p>
</li>
<li><p>PUT（更新） <a target="_blank" rel="noopener" href="http://localhost/user">http://localhost/user</a> PUT</p>
</li>
<li><p>DELETE（删除） <a target="_blank" rel="noopener" href="http://localhost/user">http://localhost/user</a> DELETE</p>
</li>
<li><p><strong>注意：</strong>上述行为是约定方式，约定不是规范，可以打破，所以称Rest风格，而不是Rest规范  </p>
</li>
</ul>
<h3 id="10-3-3-Restful开发入门"><a href="#10-3-3-Restful开发入门" class="headerlink" title="10.3.3 Restful开发入门"></a>10.3.3 Restful开发入门</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//设置rest风格的控制器</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="comment">//设置公共访问路径，配合下方访问路径使用</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user/&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//rest风格访问路径完整书写方式</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/user/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="comment">//使用@PathVariable注解获取路径上配置的具名变量，该配置可以使用多次</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">restLocation</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;restful is running ....&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success.jsp&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//rest风格访问路径简化书写方式，配合类注解@RequestMapping使用</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">restLocation2</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;restful is running ....get:&quot;</span>+id);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success.jsp&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//接收GET请求配置方式</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;&#123;id&#125;&quot;,method = RequestMethod.GET)</span></span><br><span class="line">    <span class="comment">//接收GET请求简化配置方式</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">get</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;restful is running ....get:&quot;</span>+id);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success.jsp&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//接收POST请求配置方式</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;&#123;id&#125;&quot;,method = RequestMethod.POST)</span></span><br><span class="line">    <span class="comment">//接收POST请求简化配置方式</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">post</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;restful is running ....post:&quot;</span>+id);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success.jsp&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//接收PUT请求简化配置方式</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;&#123;id&#125;&quot;,method = RequestMethod.PUT)</span></span><br><span class="line">    <span class="comment">//接收PUT请求简化配置方式</span></span><br><span class="line">    <span class="meta">@PutMapping(&quot;&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">put</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;restful is running ....put:&quot;</span>+id);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success.jsp&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//接收DELETE请求简化配置方式</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;&#123;id&#125;&quot;,method = RequestMethod.DELETE)</span></span><br><span class="line">    <span class="comment">//接收DELETE请求简化配置方式</span></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">delete</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;restful is running ....delete:&quot;</span>+id);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success.jsp&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置拦截器，解析请求中的参数_method，否则无法发起PUT请求与DELETE请求，配合页面表单使用--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>HiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.HiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>HiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>开启SpringMVC对Restful风格的访问支持过滤器，即可通过页面表单提交PUT与DELETE请求</p>
</li>
<li><p>页面表单使用隐藏域提交请求类型，参数名称固定为_method，必须配合提交类型method=post使用</p>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/user/1&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;_method&quot;</span> <span class="attr">value</span>=<span class="string">&quot;PUT&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span>  </span><br></pre></td></tr></table></figure>

<ul>
<li>  Restful请求路径简化配置方式  </li>
</ul>
  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/user/&#123;id&#125;&quot;,method = RequestMethod.DELETE)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">restDelete</span><span class="params">(<span class="meta">@PathVariable</span> String id)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;restful is running ....delete:&quot;</span>+id);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success.jsp&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<h2 id="10-4-postman工具安装与使用"><a href="#10-4-postman工具安装与使用" class="headerlink" title="10.4 postman工具安装与使用"></a>10.4 postman工具安装与使用</h2><p><strong>postman</strong> 是  一款可以发送Restful风格请求的工具，方便开发调试。首次运行需要联网注册  </p>
<p><img src="https://note-1259153703.cos.ap-nanjing.myqcloud.com/images/20211208201806.png" alt="image-20200427180851880"></p>
<h1 id="11-校验框架"><a href="#11-校验框架" class="headerlink" title="11 校验框架"></a>11 校验框架</h1><h2 id="11-1-校验框架入门"><a href="#11-1-校验框架入门" class="headerlink" title="11.1 校验框架入门"></a>11.1 校验框架入门</h2><h3 id="11-1-1-表单校验的重要性"><a href="#11-1-1-表单校验的重要性" class="headerlink" title="11.1.1 表单校验的重要性"></a>11.1.1 表单校验的重要性</h3><ul>
<li>表单校验保障了数据有效性、安全性  </li>
</ul>
<p><img src="https://note-1259153703.cos.ap-nanjing.myqcloud.com/images/20211208201843.png" alt="image-20200505144306747"></p>
<p>数据可以随意输入，导致错误的结果。后端表单校验的重要性。</p>
<h3 id="11-1-2-表单校验分类"><a href="#11-1-2-表单校验分类" class="headerlink" title="11.1.2 表单校验分类"></a>11.1.2 表单校验分类</h3><ul>
<li>校验位置：<ul>
<li>客户端校验</li>
<li>服务端校验</li>
</ul>
</li>
<li>校验内容与对应方式：<ul>
<li>格式校验<ul>
<li>客户端：使用Js技术，利用正则表达式校验</li>
<li>服务端：使用校验框架 </li>
</ul>
</li>
<li>逻辑校验<ul>
<li>客户端：使用ajax发送要校验的数据，在服务端完成逻辑校验，返回校验结果</li>
<li>服务端：接收到完整的请求后，在执行业务操作前，完成逻辑校验</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="11-1-3-表单校验规则"><a href="#11-1-3-表单校验规则" class="headerlink" title="11.1.3 表单校验规则"></a>11.1.3 表单校验规则</h3><ul>
<li>长度：例如用户名长度，评论字符数量</li>
<li>非法字符：例如用户名组成</li>
<li>数据格式：例如Email格式、 IP地址格式</li>
<li>边界值：例如转账金额上限，年龄上下限</li>
<li>重复性：例如用户名是否重复</li>
</ul>
<h3 id="11-1-4-表单校验框架"><a href="#11-1-4-表单校验框架" class="headerlink" title="11.1.4 表单校验框架"></a>11.1.4 表单校验框架</h3><ul>
<li><p>JSR（Java Specification Requests）：Java 规范提案  </p>
<p>  303：提供bean属性相关校验规则  </p>
</li>
<li><p>JSR规范列表</p>
<ul>
<li>企业应用技术<ul>
<li>Contexts and Dependency Injection for Java (Web Beans 1.0) (JSR 299)</li>
<li>Dependency Injection for Java 1.0 (JSR 330)@postConstruct, @PreDestroy</li>
<li>Bean Validation 1.0 (JSR 303)</li>
<li>Enterprise JavaBeans 3.1 (includes Interceptors 1.1) (JSR 318)</li>
<li>Java EE Connector Architecture 1.6 (JSR 322)</li>
<li>Java Persistence 2.0 (JSR 317)</li>
<li>Common Annotations for the Java Platform 1.1 (JSR 250)</li>
<li>Java Message Service API 1.1 (JSR 914)</li>
<li>Java Transaction API (JTA) 1.1 (JSR 907)</li>
<li>JavaMail 1.4 (JSR 919)</li>
</ul>
</li>
<li>Web应用技术<ul>
<li>Java Servlet 3.0 (JSR 315)</li>
<li>JavaServer Faces 2.0 (JSR 314)</li>
<li>JavaServer Pages 2.2/Expression Language 2.2 (JSR 245)</li>
<li>Standard Tag Library for JavaServer Pages (JSTL) 1.2 (JSR 52)</li>
<li>Debugging Support for Other Languages 1.0 (JSR 45)</li>
<li>模块化 (JSR 294)</li>
<li>Swing应用框架 (JSR 296)</li>
<li>JavaBeans Activation Framework (JAF) 1.1 (JSR 925)</li>
<li>Streaming API for XML (StAX) 1.0 (JSR 173)</li>
</ul>
</li>
<li>管理与安全技术<ul>
<li>Java Authentication Service Provider Interface for Containers (JSR 196)</li>
<li>Java Authorization Contract for Containers 1.3 (JSR 115)</li>
<li>Java EE Application Deployment 1.2 (JSR 88)</li>
<li>J2EE Management 1.1 (JSR 77)</li>
<li>Java SE中与Java EE有关的规范</li>
<li>JCache API (JSR 107)</li>
<li>Java Memory Model (JSR 133)</li>
<li>Concurrency Utilitie (JSR 166)</li>
<li>Java API for XML Processing (JAXP) 1.3 (JSR 206)</li>
<li>Java Database Connectivity 4.0 (JSR 221)</li>
<li>Java Management Extensions (JMX) 2.0 (JSR 255)</li>
<li>Java Portlet API (JSR 286)</li>
</ul>
</li>
<li>Web Service技术<ul>
<li>Java Date与Time API (JSR 310)</li>
<li>Java API for RESTful Web Services (JAX-RS) 1.1 (JSR 311)</li>
<li>Implementing Enterprise Web Services 1.3 (JSR 109)</li>
<li>Java API for XML-Based Web Services (JAX-WS) 2.2 (JSR 224)</li>
<li>Java Architecture for XML Binding (JAXB) 2.2 (JSR 222)</li>
<li>Web Services Metadata for the Java Platform (JSR 181)</li>
<li>Java API for XML-Based RPC (JAX-RPC) 1.1 (JSR 101)</li>
<li>Java APIs for XML Messaging 1.3 (JSR 67)</li>
<li>Java API for XML Registries (JAXR) 1.0 (JSR 93)</li>
</ul>
</li>
<li>JCP（Java Community Process）：Java社区</li>
<li>Hibernate框架中包含一套独立的校验框架hibernate-validator  </li>
</ul>
<p>导入坐标</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.hibernate<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hibernate-validator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>6.1.0.Final<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong><br>tomcat7 ：搭配hibernate-validator版本5.<em>.</em>.Final<br>tomcat8.5↑ ：搭配hibernate-validator版本6.<em>.</em>.Final  </p>
</li>
</ul>
<h2 id="11-2-快速使用"><a href="#11-2-快速使用" class="headerlink" title="11.2 快速使用"></a>11.2 快速使用</h2><p><strong>1. 开启校验</strong></p>
<ul>
<li>名称：@Valid 、 @Validated</li>
<li>类型：形参注解</li>
<li>位置：处理器类中的实体类类型的方法形参前方</li>
<li>作用：设定对当前实体类类型参数进行校验</li>
<li>范例：  </li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/addemployee&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">addEmployee</span><span class="params">(<span class="meta">@Valid</span> Employee employee)</span> </span>&#123;</span><br><span class="line">    System.out.println(employee);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>2.设置校验规则</strong></p>
<ul>
<li><p>名称：@NotNull</p>
</li>
<li><p>类型：属性注解 等</p>
</li>
<li><p>位置：实体类属性上方</p>
</li>
<li><p>作用：设定当前属性校验规则</p>
</li>
<li><p>范例：</p>
<ul>
<li>每个校验规则所携带的参数不同，根据校验规则进行相应的调整</li>
<li>具体的校验规则查看对应的校验框架进行获取</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Employee</span></span>&#123;</span><br><span class="line">    <span class="meta">@NotNull(message = &quot;姓名不能为空&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;<span class="comment">//员工姓名</span></span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<p><strong>3.获取错误信息</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/addemployee&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">addEmployee</span><span class="params">(<span class="meta">@Valid</span> Employee employee, Errors errors, Model model)</span></span>&#123;</span><br><span class="line">    System.out.println(employee);</span><br><span class="line">    <span class="keyword">if</span>(errors.hasErrors())&#123;</span><br><span class="line">        <span class="keyword">for</span>(FieldError error : errors.getFieldErrors())&#123;</span><br><span class="line">            model.addAttribute(error.getField(),error.getDefaultMessage());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;addemployee.jsp&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success.jsp&quot;</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<p>  通过形参Errors获取校验结果数据，通过Model接口将数据封装后传递到页面显示  </p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/addemployee&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    员工姓名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color:red&quot;</span>&gt;</span>$&#123;name&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    员工年龄：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color:red&quot;</span>&gt;</span>$&#123;age&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>通过形参Errors获取校验结果数据，通过Model接口将数据封装后传递到页面显示<br>页面获取后台封装的校验结果信息  </p>
<h2 id="11-3-多规则校验"><a href="#11-3-多规则校验" class="headerlink" title="11.3 多规则校验"></a>11.3 多规则校验</h2><ul>
<li>同一个属性可以添加多个校验器  </li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@NotNull(message = &quot;请输入您的年龄&quot;)</span></span><br><span class="line"><span class="meta">@Max(value = 60,message = &quot;年龄最大值不允许超过60岁&quot;)</span></span><br><span class="line"><span class="meta">@Min(value = 18,message = &quot;年龄最小值不允许低于18岁&quot;)</span></span><br><span class="line"><span class="keyword">private</span> Integer age;<span class="comment">//员工年龄</span></span><br></pre></td></tr></table></figure>

<ul>
<li>3种判定空校验器的区别  </li>
</ul>
<p><img src="https://note-1259153703.cos.ap-nanjing.myqcloud.com/images/20211208201844.png" alt="image-20200506160725709"></p>
<h2 id="11-4-嵌套校验"><a href="#11-4-嵌套校验" class="headerlink" title="11.4 嵌套校验"></a>11.4 嵌套校验</h2><ul>
<li><p>名称：@Valid</p>
</li>
<li><p>类型：属性注解</p>
</li>
<li><p>位置：实体类中的引用类型属性上方</p>
</li>
<li><p>作用：设定当前应用类型属性中的属性开启校验</p>
</li>
<li><p>范例：</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Employee</span> </span>&#123;</span><br><span class="line">    <span class="comment">//实体类中的引用类型通过标注@Valid注解，设定开启当前引用类型字段中的属性参与校验</span></span><br><span class="line">    <span class="meta">@Valid</span></span><br><span class="line">    <span class="keyword">private</span> Address address;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意：开启嵌套校验后，被校验对象内部需要添加对应的校验规则  </p>
<h2 id="11-5-分组校验"><a href="#11-5-分组校验" class="headerlink" title="11.5 分组校验"></a>11.5 分组校验</h2><ul>
<li>同一个模块，根据执行的业务不同，需要校验的属性会有不同<ul>
<li>新增用户</li>
<li>修改用户</li>
</ul>
</li>
<li>对不同种类的属性进行分组，在校验时可以指定参与校验的字段所属的组类别<ul>
<li>定义组（通用）</li>
<li>为属性设置所属组，可以设置多个</li>
<li>开启组校验</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">GroupOne</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">addEmployee</span><span class="params">(<span class="meta">@Validated(&#123;GroupOne.class&#125;)</span> Employee employee)</span></span>&#123;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>




<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@NotEmpty(message = &quot;姓名不能为空&quot;,groups = &#123;GroupOne.class&#125;)</span></span><br><span class="line"><span class="keyword">private</span> String name;<span class="comment">//员工姓名</span></span><br></pre></td></tr></table></figure>

<h1 id="12-ssm整合"><a href="#12-ssm整合" class="headerlink" title="12 ssm整合"></a>12 ssm整合</h1><h2 id="12-1-整合流程简介"><a href="#12-1-整合流程简介" class="headerlink" title="12.1 整合流程简介"></a>12.1 整合流程简介</h2><p>整合步骤分析</p>
<p>SSM（Spring+SpringMVC+MyBatis）</p>
<ul>
<li><p>Spring</p>
<ul>
<li>框架基础</li>
</ul>
</li>
<li><p>MyBatis</p>
<ul>
<li>mysql+druid+pagehelper</li>
</ul>
</li>
<li><p>Spring整合MyBatis</p>
</li>
<li><p>junit测试业务层接口</p>
</li>
<li><p>SpringMVC</p>
<ul>
<li>rest风格（postman测试请求结果）</li>
<li>数据封装json（jackson）</li>
</ul>
</li>
<li><p>Spring整合SpringMVC</p>
<ul>
<li>Controller调用Service</li>
</ul>
</li>
<li><p>其他</p>
<ul>
<li><p>表现层数据封装</p>
</li>
<li><p>自定义异常</p>
</li>
</ul>
</li>
</ul>
<p><strong>表结构</strong></p>
<p><img src="https://note-1259153703.cos.ap-nanjing.myqcloud.com/images/20211208201845.png" alt="image-20200506093609697"></p>
<p>​    最重要的5个步骤</p>
<ol>
<li><p>Spring</p>
</li>
<li><p>MyBatis</p>
</li>
<li><p>Spring整合MyBatis</p>
</li>
<li><p>SpringMVC</p>
</li>
<li><p>Spring整合SpringMVC</p>
</li>
</ol>
<h2 id="12-2-项目结构搭建"><a href="#12-2-项目结构搭建" class="headerlink" title="12.2 项目结构搭建"></a>12.2 项目结构搭建</h2><p><strong>Part0：</strong>   项目基础结构搭建</p>
<ul>
<li><p>创建项目，组织项目结构，创建包</p>
</li>
<li><p>创建表与实体类</p>
</li>
<li><p>创建三层架构对应的模块、接口与实体类，建立关联关系</p>
</li>
<li><p>数据层接口（代理自动创建实现类）</p>
<ul>
<li>业务层接口+业务层实现类</li>
<li>表现层类</li>
</ul>
</li>
</ul>
<p><img src="https://note-1259153703.cos.ap-nanjing.myqcloud.com/images/20211208201846.png" alt="image-20200506094053535"></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserDao</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">save</span><span class="params">(User user)</span></span>;  <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">update</span><span class="params">(User user)</span></span>;  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">delete</span><span class="params">(Integer uuid)</span></span>;  <span class="function"><span class="keyword">public</span> User <span class="title">get</span><span class="params">(Integer uuid)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">getAll</span><span class="params">(<span class="keyword">int</span> page,<span class="keyword">int</span> size)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserService</span> </span>&#123;  </span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">save</span><span class="params">(User user)</span></span>;  <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">update</span><span class="params">(User user)</span></span>;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">delete</span><span class="params">(Integer uuid)</span></span>;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> User <span class="title">get</span><span class="params">(Integer uuid)</span></span>;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">getAll</span><span class="params">(<span class="keyword">int</span> page, <span class="keyword">int</span> size)</span></span>;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">        用户登录</span></span><br><span class="line"><span class="comment">        <span class="doctag">@param</span> userName 用户名</span></span><br><span class="line"><span class="comment">        <span class="doctag">@param</span> password 密码信息</span></span><br><span class="line"><span class="comment">        <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> User <span class="title">login</span><span class="params">(String userName,String password)</span></span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>



<h2 id="12-3-Spring整合Mybatis（复习）"><a href="#12-3-Spring整合Mybatis（复习）" class="headerlink" title="12.3 Spring整合Mybatis（复习）"></a>12.3 Spring整合Mybatis（复习）</h2><p><strong>Part1 :</strong>  Spring环境配置</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span>  <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span>  <span class="attr">xmlns:tx</span>=<span class="string">&quot;http://www.springframework.org/schema/tx&quot;</span>  <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>  <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans  http://www.springframework.org/schema/beans/spring-beans.xsd  http://www.springframework.org/schema/context  http://www.springframework.org/schema/context/spring-context.xsd  http://www.springframework.org/schema/tx  http://www.springframework.org/schema/tx/spring-tx.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--开启bean注解扫描--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.itheima&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Part1 :</strong>  Mybatis配置事务</p>
<ul>
<li><p>MyBatis映射</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.itheima.dao.UserDao&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--添加--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;save&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;user&quot;</span>&gt;</span></span><br><span class="line">        insert into user(userName,password,realName,gender,birthday)values(#&#123;userName&#125;,#&#123;password&#125;,#&#123;realName&#125;,#&#123;gender&#125;,#&#123;birthday&#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--删除--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;delete&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">        delete from user where uuid = #&#123;uuid&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--修改--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;update&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;user&quot;</span>&gt;</span></span><br><span class="line">        update user set userName=#&#123;userName&#125;,password=#&#123;password&#125;,realName=#&#123;realName&#125;,gender=#&#123;gender&#125;,birthday=#&#123;birthday&#125; where uuid=#&#123;uuid&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--查询单个--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;get&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;user&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">        select * from user where uuid = #&#123;uuid&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--分页查询--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getAll&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;user&quot;</span>&gt;</span></span><br><span class="line">        select * from user</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--登录--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getByUserNameAndPassword&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;user&quot;</span> &gt;</span></span><br><span class="line">        select * from user where userName=#&#123;userName&#125; and password=#&#123;password&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>Mybatis核心配置</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--开启注解式事务--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tx:annotation-driven</span> <span class="attr">transaction-manager</span>=<span class="string">&quot;txManager&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--加载properties文件--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;classpath*:jdbc.properties&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--数据源--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driver&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--整合mybatis到spring中--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;typeAliasesPackage&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.itheima.domain&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--分页插件--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;plugins&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.github.pagehelper.PageInterceptor&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;properties&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">props</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;helperDialect&quot;</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;reasonable&quot;</span>&gt;</span>true<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">props</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--映射扫描--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;basePackage&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.itheima.dao&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--事务管理器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;txManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="12-4-整合junit"><a href="#12-4-整合junit" class="headerlink" title="12.4 整合junit"></a>12.4 整合junit</h2><p><strong>Part2：</strong>单元测试整合junit</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RunWith(SpringJUnit4ClassRunner.class)</span>  </span><br><span class="line"><span class="meta">@ContextConfiguration(locations = &quot;classpath:applicationContext.xml&quot;)</span>  </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDelete</span><span class="params">()</span></span>&#123;  </span><br><span class="line">        User user = <span class="keyword">new</span> User();  userService.delete(<span class="number">3</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="12-5-Spring整合SpringMVC"><a href="#12-5-Spring整合SpringMVC" class="headerlink" title="12.5 Spring整合SpringMVC"></a>12.5 Spring整合SpringMVC</h2><p><strong>Part3：</strong>SpringMVC</p>
<ul>
<li><p>web.xml配置</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath*:spring-mvc.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>spring-mvc.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:mvc</span>=<span class="string">&quot;http://www.springframework.org/schema/mvc&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.itheima.controller&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>controller层</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span>  </span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user&quot;)</span>  <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@PostMapping</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">save</span><span class="params">(User user)</span> </span>&#123;  </span><br><span class="line">        System.out.println(<span class="string">&quot;save ...&quot;</span> + user);  <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@PostMapping(&quot;/login&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">login</span><span class="params">(String userName,String password)</span></span>&#123;  </span><br><span class="line">        System.out.println(<span class="string">&quot;login ...&quot;</span> + userName + <span class="string">&quot; ,&quot;</span> +password);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>Part4：</strong>Spring整合SpringMVC</p>
<ul>
<li><p>web.xml加载Spring环境</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath*:applicationContext.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--启动服务器时，通过监听器加载spring运行环境--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>Controller调用Service</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">save</span><span class="params">(User user)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userService.save(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="12-6-表现层数据封装"><a href="#12-6-表现层数据封装" class="headerlink" title="12.6 表现层数据封装"></a>12.6 表现层数据封装</h2><p><strong>Part5-1：</strong>表现层数据封装</p>
<ul>
<li>前端接收表现层返回的数据种类</li>
</ul>
<table>
<thead>
<tr>
<th>u操作是否成功</th>
<th>true/false</th>
<th>格式A</th>
</tr>
</thead>
<tbody><tr>
<td>u单个数据</td>
<td>1,100,true</td>
<td>格式B</td>
</tr>
<tr>
<td>u对象数据</td>
<td>json对象</td>
<td>格式C</td>
</tr>
<tr>
<td>u集合数据</td>
<td>json数组</td>
<td>格式D</td>
</tr>
</tbody></table>
<p><img src="https://note-1259153703.cos.ap-nanjing.myqcloud.com/images/20211208201847.png" alt="image-20200506103851845"></p>
<ul>
<li>返回数据格式设计</li>
</ul>
<p><img src="https://note-1259153703.cos.ap-nanjing.myqcloud.com/images/20211208201848.png" alt="image-20200506104339019"></p>
<ul>
<li><p>代码</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Result</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 操作结果编码</span></span><br><span class="line">    <span class="keyword">private</span> Integer code;</span><br><span class="line">    <span class="comment">// 操作数据结果</span></span><br><span class="line">    <span class="keyword">private</span> Object data;</span><br><span class="line">    <span class="comment">// 消息</span></span><br><span class="line">    <span class="keyword">private</span> String message;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Result</span><span class="params">(Integer code)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.code = code;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Result</span><span class="params">(Integer code, Object data)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.code = code;</span><br><span class="line">        <span class="keyword">this</span>.data = data;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>状态码常量可以根据自己的业务需求设定</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Code</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Integer SAVE_OK = <span class="number">20011</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Integer SAVE_ERROR = <span class="number">20010</span>;</span><br><span class="line">    <span class="comment">//其他编码</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>controller 调用</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line">    <span class="meta">@PostMapping</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Result <span class="title">save</span><span class="params">(User user)</span></span>&#123;</span><br><span class="line">        <span class="keyword">boolean</span> flag = userService.save(user);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Result(flag ? Code.SAVE_OK:Code.SAVE_ERROR);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@GetMapping(&quot;/&#123;uuid&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Result <span class="title">get</span><span class="params">(<span class="meta">@PathVariable</span> Integer uuid)</span></span>&#123;</span><br><span class="line">        User user = userService.get(uuid);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Result(<span class="keyword">null</span> != user ?Code.GET_OK: Code.GET_ERROR,user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="12-7-自定义异常"><a href="#12-7-自定义异常" class="headerlink" title="12.7 自定义异常"></a>12.7 自定义异常</h2><p><strong>Part5-2：</strong>自定义异常</p>
<ul>
<li><p>设定自定义异常，封装程序执行过程中出现的问题，便于表现层进行统一的异常拦截并进行处理</p>
<ul>
<li>BusinessException</li>
<li>SystemException</li>
</ul>
</li>
<li><p>自定义异常消息返回时需要与业务正常执行的消息按照统一的格式进行处理</p>
</li>
</ul>
<p><strong>定义BusinessException</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BusinessException</span> <span class="keyword">extends</span> <span class="title">RuntimeException</span> </span>&#123;</span><br><span class="line">    <span class="comment">//自定义异常中封装对应的错误编码，用于异常处理时获取对应的操作编码</span></span><br><span class="line">    <span class="keyword">private</span> Integer code;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCode</span><span class="params">(Integer code)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.code = code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BusinessException</span><span class="params">(Integer code)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.code = code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BusinessException</span><span class="params">(String message, Integer code)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(message);</span><br><span class="line">        <span class="keyword">this</span>.code = code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BusinessException</span><span class="params">(String message, Throwable cause,Integer code)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(message, cause);</span><br><span class="line">        <span class="keyword">this</span>.code = code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BusinessException</span><span class="params">(Throwable cause,Integer code)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(cause);</span><br><span class="line">        <span class="keyword">this</span>.code = code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BusinessException</span><span class="params">(String message, Throwable cause, <span class="keyword">boolean</span> enableSuppression, <span class="keyword">boolean</span> writableStackTrace,Integer code)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(message, cause, enableSuppression, writableStackTrace);</span><br><span class="line">        <span class="keyword">this</span>.code = code;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/&#123;uuid&#125;&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Result <span class="title">get</span><span class="params">(<span class="meta">@PathVariable</span> Integer uuid)</span></span>&#123;</span><br><span class="line">    User user = userService.get(uuid);</span><br><span class="line">    <span class="comment">//模拟出现异常，使用条件控制，便于测试结果</span></span><br><span class="line">    <span class="keyword">if</span> (uuid == <span class="number">10</span> ) <span class="keyword">throw</span> <span class="keyword">new</span> BusinessException(<span class="string">&quot;查询出错啦，请重试！&quot;</span>,Code.GET_ERROR);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Result(<span class="keyword">null</span> != user ?Code.GET_OK: Code.GET_ERROR,user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="12-8-返回消息兼容异常信息"><a href="#12-8-返回消息兼容异常信息" class="headerlink" title="12.8 返回消息兼容异常信息"></a><strong>12.8 返回消息兼容异常信息</strong></h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProjectExceptionAdivce</span> </span>&#123;</span><br><span class="line">    <span class="meta">@ExceptionHandler(BusinessException.class)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="comment">//对出现异常的情况进行拦截，并将其处理成统一的页面数据结果格式</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Result <span class="title">doBusinessException</span><span class="params">(BusinessException e)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Result(e.getCode(),e.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="13-纯注解开发SSM"><a href="#13-纯注解开发SSM" class="headerlink" title="13 纯注解开发SSM"></a>13 纯注解开发SSM</h1><h2 id="13-1-用注解替代applicationContext-xml"><a href="#13-1-用注解替代applicationContext-xml" class="headerlink" title="13.1 用注解替代applicationContext.xml"></a>13.1 用注解替代applicationContext.xml</h2><p>同前期设置，添加事务注解驱动<br>@Configuration</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//扫描组件，排除SpringMVC对应的bean，等同于&lt;context:component-scan /&gt;</span></span><br><span class="line"><span class="meta">@ComponentScan(value = &quot;com.itheima&quot;,excludeFilters = &#123;</span></span><br><span class="line"><span class="meta">    @ComponentScan.Filter(type= FilterType.ANNOTATION,classes = &#123;Controller.class&#125;)&#125;)</span></span><br><span class="line"><span class="meta">@PropertySource(&quot;classpath:jdbc.properties&quot;)</span></span><br><span class="line"><span class="meta">@Import(&#123;JdbcConfig.class,MyBatisConfig.class&#125;)</span></span><br><span class="line"><span class="comment">//等同于&lt;tx:annotation-driven transaction-manager=&quot;txManager&quot;/&gt;，导入的默认名称为transactionManager</span></span><br><span class="line"><span class="meta">@EnableTransactionManagement</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringConfig</span> </span>&#123;</span><br><span class="line">    <span class="comment">//等同于&lt;bean   class=&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;&gt;</span></span><br><span class="line">    <span class="meta">@Bean(&quot;transactionManager&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> DataSourceTransactionManager <span class="title">getDataSourceTxManager</span><span class="params">(<span class="meta">@Autowired</span> DataSource dataSource)</span></span>&#123;</span><br><span class="line">        DataSourceTransactionManager dtm = <span class="keyword">new</span> DataSourceTransactionManager();</span><br><span class="line">        <span class="comment">//等同于&lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;/&gt;</span></span><br><span class="line">        dtm.setDataSource(dataSource);</span><br><span class="line">        <span class="keyword">return</span> dtm;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<h2 id="13-2-用注解替代spring-mvc-xml"><a href="#13-2-用注解替代spring-mvc-xml" class="headerlink" title="13.2 用注解替代spring-mvc.xml"></a>13.2 用注解替代spring-mvc.xml</h2><ul>
<li>  同前期设置，添加@EnableWebMvc注解  </li>
</ul>
  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.itheima.controller&quot;)</span></span><br><span class="line"><span class="meta">@EnableWebMvc</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringMvcConfig</span> <span class="keyword">implements</span> <span class="title">WebMvcConfigurer</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>  EnableWebMvc  </li>
</ul>
<ol>
<li>支持ConversionService的配置，可以方便配置自定义类型转换器</li>
<li>支持@NumberFormat注解格式化数字类型</li>
<li>支持@DateTimeFormat注解格式化日期数据，日期包括Date,Calendar,JodaTime（JodaTime要导包）</li>
<li>支持@Valid的参数校验(需要导入JSR-303规范)</li>
<li>配合第三方jar包和SpringMVC提供的注解读写XML和JSON格式数据  </li>
</ol>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">小肥龙吃大冰淇淋</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://andice-cream.github.io/post/ae0f95e0.html">https://andice-cream.github.io/post/ae0f95e0.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://andice-cream.github.io" target="_blank">小肥龙吃大冰淇淋</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/SpringMVC/">SpringMVC</a></div><div class="post_share"><div class="social-share" data-image="https://note-1259153703.cos.ap-nanjing.myqcloud.com/images/20211108212110.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button button--animated"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/LVXUEYANGTiger/blog@main/mm_facetoface_collect_qrcode_1628169825807.png" target="_blank"><img class="post-qr-code-img" src="https://cdn.jsdelivr.net/gh/LVXUEYANGTiger/blog@main/mm_facetoface_collect_qrcode_1628169825807.png" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/LVXUEYANGTiger/blog@main/1628169797.jpg" target="_blank"><img class="post-qr-code-img" src="https://cdn.jsdelivr.net/gh/LVXUEYANGTiger/blog@main/1628169797.jpg" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/post/6e12c924.html"><img class="prev-cover" src="https://note-1259153703.cos.ap-nanjing.myqcloud.com/images/20211108212044.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Springboot-day02</div></div></a></div><div class="next-post pull-right"><a href="/post/6c92115f.html"><img class="next-cover" src="https://note-1259153703.cos.ap-nanjing.myqcloud.com/images/20211004082249.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Spring</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-SpringMVC-%E6%A6%82%E8%BF%B0"><span class="toc-number">1.</span> <span class="toc-text">1 SpringMVC 概述</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-%E5%85%A5%E9%97%A8%E6%A1%88%E4%BE%8B"><span class="toc-number">2.</span> <span class="toc-text">2 入门案例</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-%E5%85%A5%E9%97%A8%E6%A1%88%E4%BE%8B%E5%88%B6%E4%BD%9C"><span class="toc-number">2.1.</span> <span class="toc-text">2.1 入门案例制作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-%E5%85%A5%E9%97%A8%E6%A1%88%E4%BE%8B%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B%E5%88%86%E6%9E%90"><span class="toc-number">2.2.</span> <span class="toc-text">2.2 入门案例工作流程分析</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-SpringMVC-%E6%8A%80%E6%9C%AF%E6%9E%B6%E6%9E%84%E5%9B%BE"><span class="toc-number">2.3.</span> <span class="toc-text">2.3 SpringMVC 技术架构图</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE"><span class="toc-number">3.</span> <span class="toc-text">3 基本配置</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-%E5%B8%B8%E8%A7%84%E9%85%8D%E7%BD%AE%EF%BC%88Controller%E5%8A%A0%E8%BD%BD%E6%8E%A7%E5%88%B6%EF%BC%89"><span class="toc-number">3.1.</span> <span class="toc-text">3.1 常规配置（Controller加载控制）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-1-%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E5%8A%A0%E8%BD%BD"><span class="toc-number">3.1.1.</span> <span class="toc-text">3.1.1 静态资源加载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-2-%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81%E5%A4%84%E7%90%86"><span class="toc-number">3.1.2.</span> <span class="toc-text">3.1.2 中文乱码处理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-%E6%B3%A8%E8%A7%A3%E9%A9%B1%E5%8A%A8"><span class="toc-number">3.2.</span> <span class="toc-text">3.2 注解驱动</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3%E5%B0%8F%E7%BB%93"><span class="toc-number">3.3.</span> <span class="toc-text">3.3小结</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-%E8%AF%B7%E6%B1%82"><span class="toc-number">4.</span> <span class="toc-text">4 请求</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-%E6%99%AE%E9%80%9A%E7%B1%BB%E5%9E%8B%E5%8F%82%E6%95%B0%E4%BC%A0%E5%8F%82"><span class="toc-number">4.1.</span> <span class="toc-text">4.1 普通类型参数传参</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2-POJO%E7%B1%BB%E5%9E%8B%E5%8F%82%E6%95%B0%E4%BC%A0%E5%8F%82"><span class="toc-number">4.2.</span> <span class="toc-text">4.2 POJO类型参数传参</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-3-%E6%95%B0%E7%BB%84%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB%E5%9E%8B%E5%8F%82%E6%95%B0%E4%BC%A0%E5%8F%82"><span class="toc-number">4.3.</span> <span class="toc-text">4.3 数组与集合类型参数传参</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-4-%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2%E5%99%A8"><span class="toc-number">4.4.</span> <span class="toc-text">4.4 类型转换器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-5-%E6%97%A5%E6%9C%9F%E7%B1%BB%E5%9E%8B%E6%A0%BC%E5%BC%8F%E8%BD%AC%E6%8D%A2"><span class="toc-number">4.5.</span> <span class="toc-text">4.5 日期类型格式转换</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-6-%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2%E5%99%A8"><span class="toc-number">4.6.</span> <span class="toc-text">4.6 自定义类型转换器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-7-%E8%AF%B7%E6%B1%82%E6%98%A0%E5%B0%84-RequestMapping"><span class="toc-number">4.7.</span> <span class="toc-text">4.7 请求映射 @RequestMapping</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-7-1-%E6%96%B9%E6%B3%95%E6%B3%A8%E8%A7%A3"><span class="toc-number">4.7.1.</span> <span class="toc-text">4.7.1 方法注解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-7-2-%E7%B1%BB%E6%B3%A8%E8%A7%A3"><span class="toc-number">4.7.2.</span> <span class="toc-text">4.7.2 类注解</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-%E5%93%8D%E5%BA%94"><span class="toc-number">5.</span> <span class="toc-text">5 响应</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1-%E9%A1%B5%E9%9D%A2%E8%B7%B3%E8%BD%AC"><span class="toc-number">5.1.</span> <span class="toc-text">5.1 页面跳转</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-2-%E9%A1%B5%E9%9D%A2%E8%AE%BF%E9%97%AE%E5%BF%AB%E6%8D%B7%E8%AE%BE%E5%AE%9A-InternalResourceViewResolver"><span class="toc-number">5.2.</span> <span class="toc-text">5.2 页面访问快捷设定 (InternalResourceViewResolver)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-3-%E5%B8%A6%E6%95%B0%E6%8D%AE%E9%A1%B5%E9%9D%A2%E8%B7%B3%E8%BD%AC"><span class="toc-number">5.3.</span> <span class="toc-text">5.3 带数据页面跳转</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-4-%E8%BF%94%E5%9B%9Ejson%E6%95%B0%E6%8D%AE"><span class="toc-number">5.4.</span> <span class="toc-text">5.4 返回json数据</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6-Servlet%E7%9B%B8%E5%85%B3%E6%8E%A5%E5%8F%A3-Servlet%E7%9B%B8%E5%85%B3%E6%8E%A5%E5%8F%A3%E6%9B%BF%E6%8D%A2%E6%96%B9%E6%A1%88"><span class="toc-number">6.</span> <span class="toc-text">6 Servlet相关接口-Servlet相关接口替换方案</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#6-1-%E5%8F%91%E9%80%81%E5%BC%82%E6%AD%A5%E8%AF%B7%E6%B1%82%EF%BC%88%E5%9B%9E%E9%A1%BE%EF%BC%89"><span class="toc-number">6.1.</span> <span class="toc-text">6.1 发送异步请求（回顾）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-2-%E6%8E%A5%E5%8F%97%E5%BC%82%E6%AD%A5%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0"><span class="toc-number">6.2.</span> <span class="toc-text">6.2 接受异步请求参数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-3-%E5%BC%82%E6%AD%A5%E8%AF%B7%E6%B1%82%E6%8E%A5%E5%8F%97%E5%93%8D%E5%BA%94%E6%95%B0%E6%8D%AE"><span class="toc-number">6.3.</span> <span class="toc-text">6.3 异步请求接受响应数据</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#7-%E5%BC%82%E6%AD%A5%E8%AF%B7%E6%B1%82-%E8%B7%A8%E5%9F%9F%E8%AE%BF%E9%97%AE"><span class="toc-number">7.</span> <span class="toc-text">7 异步请求-跨域访问</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#7-1-%E8%B7%A8%E5%9F%9F%E8%AE%BF%E9%97%AE%E4%BB%8B%E7%BB%8D"><span class="toc-number">7.1.</span> <span class="toc-text">7.1 跨域访问介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-2-%E8%B7%A8%E5%9F%9F%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA"><span class="toc-number">7.2.</span> <span class="toc-text">7.2 跨域环境搭建</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-3-%E8%B7%A8%E5%9F%9F%E8%AE%BF%E9%97%AE%E6%94%AF%E6%8C%81"><span class="toc-number">7.3.</span> <span class="toc-text">7.3 跨域访问支持</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#8-%E6%8B%A6%E6%88%AA%E5%99%A8"><span class="toc-number">8.</span> <span class="toc-text">8 拦截器</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#8-1-%E6%8B%A6%E6%88%AA%E5%99%A8%E6%A6%82%E5%BF%B5"><span class="toc-number">8.1.</span> <span class="toc-text">8.1 拦截器概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-2-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8B%A6%E6%88%AA%E5%99%A8%E5%BC%80%E5%8F%91%E8%BF%87%E7%A8%8B"><span class="toc-number">8.2.</span> <span class="toc-text">8.2 自定义拦截器开发过程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-3-%E6%8B%A6%E6%88%AA%E5%99%A8%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B"><span class="toc-number">8.3.</span> <span class="toc-text">8.3 拦截器执行流程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-4-%E6%8B%A6%E6%88%AA%E5%99%A8%E9%85%8D%E7%BD%AE%E4%B8%8E%E6%96%B9%E6%B3%95%E5%8F%82%E6%95%B0"><span class="toc-number">8.4.</span> <span class="toc-text">8.4 拦截器配置与方法参数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-4-1-%E5%89%8D%E7%BD%AE%E5%A4%84%E7%90%86%E6%96%B9%E6%B3%95"><span class="toc-number">8.4.1.</span> <span class="toc-text">8.4.1 前置处理方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-4-2-%E5%90%8E%E7%BD%AE%E5%A4%84%E7%90%86%E6%96%B9%E6%B3%95"><span class="toc-number">8.4.2.</span> <span class="toc-text">8.4.2   后置处理方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-4-3-%E5%AE%8C%E6%88%90%E5%A4%84%E7%90%86%E6%96%B9%E6%B3%95"><span class="toc-number">8.4.3.</span> <span class="toc-text">8.4.3 完成处理方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-5-%E6%8B%A6%E6%88%AA%E5%99%A8%E9%85%8D%E7%BD%AE%E9%A1%B9"><span class="toc-number">8.5.</span> <span class="toc-text">8.5 拦截器配置项</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-6-%E5%A4%9A%E6%8B%A6%E6%88%AA%E5%99%A8%E9%85%8D%E7%BD%AE"><span class="toc-number">8.6.</span> <span class="toc-text">8.6 多拦截器配置</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#9-%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="toc-number">9.</span> <span class="toc-text">9 异常处理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#9-1-%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E5%99%A8"><span class="toc-number">9.1.</span> <span class="toc-text">9.1 异常处理器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-2-%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E5%99%A8"><span class="toc-number">9.2.</span> <span class="toc-text">9.2 注解开发异常处理器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-3-%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-number">9.3.</span> <span class="toc-text">9.3 异常处理解决方案</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-4-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%82%E5%B8%B8"><span class="toc-number">9.4.</span> <span class="toc-text">9.4 自定义异常</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#10-%E5%AE%9E%E7%94%A8%E6%8A%80%E6%9C%AF"><span class="toc-number">10.</span> <span class="toc-text">10 实用技术</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#10-1-%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD"><span class="toc-number">10.1.</span> <span class="toc-text">10.1 文件上传下载</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-2-%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">10.2.</span> <span class="toc-text">10.2 文件上传注意事项</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-3-Restful%E9%A3%8E%E6%A0%BC%E9%85%8D%E7%BD%AE"><span class="toc-number">10.3.</span> <span class="toc-text">10.3 Restful风格配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#10-3-1-Rest"><span class="toc-number">10.3.1.</span> <span class="toc-text">10.3.1 Rest</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-3-2-Rest%E8%A1%8C%E4%B8%BA%E7%BA%A6%E5%AE%9A%E6%96%B9%E5%BC%8F"><span class="toc-number">10.3.2.</span> <span class="toc-text">10.3.2 Rest行为约定方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-3-3-Restful%E5%BC%80%E5%8F%91%E5%85%A5%E9%97%A8"><span class="toc-number">10.3.3.</span> <span class="toc-text">10.3.3 Restful开发入门</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-4-postman%E5%B7%A5%E5%85%B7%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8"><span class="toc-number">10.4.</span> <span class="toc-text">10.4 postman工具安装与使用</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#11-%E6%A0%A1%E9%AA%8C%E6%A1%86%E6%9E%B6"><span class="toc-number">11.</span> <span class="toc-text">11 校验框架</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#11-1-%E6%A0%A1%E9%AA%8C%E6%A1%86%E6%9E%B6%E5%85%A5%E9%97%A8"><span class="toc-number">11.1.</span> <span class="toc-text">11.1 校验框架入门</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-1-1-%E8%A1%A8%E5%8D%95%E6%A0%A1%E9%AA%8C%E7%9A%84%E9%87%8D%E8%A6%81%E6%80%A7"><span class="toc-number">11.1.1.</span> <span class="toc-text">11.1.1 表单校验的重要性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-1-2-%E8%A1%A8%E5%8D%95%E6%A0%A1%E9%AA%8C%E5%88%86%E7%B1%BB"><span class="toc-number">11.1.2.</span> <span class="toc-text">11.1.2 表单校验分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-1-3-%E8%A1%A8%E5%8D%95%E6%A0%A1%E9%AA%8C%E8%A7%84%E5%88%99"><span class="toc-number">11.1.3.</span> <span class="toc-text">11.1.3 表单校验规则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-1-4-%E8%A1%A8%E5%8D%95%E6%A0%A1%E9%AA%8C%E6%A1%86%E6%9E%B6"><span class="toc-number">11.1.4.</span> <span class="toc-text">11.1.4 表单校验框架</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-2-%E5%BF%AB%E9%80%9F%E4%BD%BF%E7%94%A8"><span class="toc-number">11.2.</span> <span class="toc-text">11.2 快速使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-3-%E5%A4%9A%E8%A7%84%E5%88%99%E6%A0%A1%E9%AA%8C"><span class="toc-number">11.3.</span> <span class="toc-text">11.3 多规则校验</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-4-%E5%B5%8C%E5%A5%97%E6%A0%A1%E9%AA%8C"><span class="toc-number">11.4.</span> <span class="toc-text">11.4 嵌套校验</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-5-%E5%88%86%E7%BB%84%E6%A0%A1%E9%AA%8C"><span class="toc-number">11.5.</span> <span class="toc-text">11.5 分组校验</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#12-ssm%E6%95%B4%E5%90%88"><span class="toc-number">12.</span> <span class="toc-text">12 ssm整合</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#12-1-%E6%95%B4%E5%90%88%E6%B5%81%E7%A8%8B%E7%AE%80%E4%BB%8B"><span class="toc-number">12.1.</span> <span class="toc-text">12.1 整合流程简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-2-%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E6%90%AD%E5%BB%BA"><span class="toc-number">12.2.</span> <span class="toc-text">12.2 项目结构搭建</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-3-Spring%E6%95%B4%E5%90%88Mybatis%EF%BC%88%E5%A4%8D%E4%B9%A0%EF%BC%89"><span class="toc-number">12.3.</span> <span class="toc-text">12.3 Spring整合Mybatis（复习）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-4-%E6%95%B4%E5%90%88junit"><span class="toc-number">12.4.</span> <span class="toc-text">12.4 整合junit</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-5-Spring%E6%95%B4%E5%90%88SpringMVC"><span class="toc-number">12.5.</span> <span class="toc-text">12.5 Spring整合SpringMVC</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-6-%E8%A1%A8%E7%8E%B0%E5%B1%82%E6%95%B0%E6%8D%AE%E5%B0%81%E8%A3%85"><span class="toc-number">12.6.</span> <span class="toc-text">12.6 表现层数据封装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-7-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%82%E5%B8%B8"><span class="toc-number">12.7.</span> <span class="toc-text">12.7 自定义异常</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-8-%E8%BF%94%E5%9B%9E%E6%B6%88%E6%81%AF%E5%85%BC%E5%AE%B9%E5%BC%82%E5%B8%B8%E4%BF%A1%E6%81%AF"><span class="toc-number">12.8.</span> <span class="toc-text">12.8 返回消息兼容异常信息</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#13-%E7%BA%AF%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91SSM"><span class="toc-number">13.</span> <span class="toc-text">13 纯注解开发SSM</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#13-1-%E7%94%A8%E6%B3%A8%E8%A7%A3%E6%9B%BF%E4%BB%A3applicationContext-xml"><span class="toc-number">13.1.</span> <span class="toc-text">13.1 用注解替代applicationContext.xml</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-2-%E7%94%A8%E6%B3%A8%E8%A7%A3%E6%9B%BF%E4%BB%A3spring-mvc-xml"><span class="toc-number">13.2.</span> <span class="toc-text">13.2 用注解替代spring-mvc.xml</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By 小肥龙吃大冰淇淋</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="framework-info"><img src="https://note-1259153703.cos.ap-nanjing.myqcloud.com/images/202301132049386.png"/><span> </span><a target="_blank" rel="noopener" href="http://beian.miit.gov.cn/">晋ICP备2022012091号-1</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font-plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font-minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="translateLink" type="button" title="简繁转换">简</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="chat_btn" type="button" title="rightside.chat_btn"><i class="fas fa-sms"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>(()=>{
  const $countDom = document.getElementById('twikoo-count')
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'pinglun-9gh2lmcnd8587831',
      region: ''
    }, null))
  }

  const getCount = () => {
    twikoo.getCommentsCount({
      envId: 'pinglun-9gh2lmcnd8587831',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(function (res) {
      $countDom.innerText = res[0].count
    }).catch(function (err) {
      console.error(err);
    });
  }

  const loadTwikoo = (bool = false) => {
    if (typeof twikoo === 'object') {
      init()
      bool && $countDom && setTimeout(getCount,0)
    } else {
      getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(()=> {
        init()
        bool && $countDom && setTimeout(getCount,0)
      })
    }
  }

  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo(true)
  } else {
    window.loadOtherComment = () => {
      loadTwikoo()
    }
  }
})()</script></div><script defer src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script defer src="https://cdn.jsdelivr.net/npm/hexo-theme-volantis@latest/source/js/issues.min.js"></script><script src="//code.tidio.co/smwivpnwumemac2wohardi3d3gpud1ag.js" async="async"></script><script>function onTidioChatApiReady() {
  window.tidioChatApi.hide();
  window.tidioChatApi.on("close", function() {
    window.tidioChatApi.hide();
  });
}
if (window.tidioChatApi) {
  window.tidioChatApi.on("ready", onTidioChatApiReady);
} else {
  document.addEventListener("tidioChat-ready", onTidioChatApiReady);
}

var chatBtnFn = () => {
  document.getElementById("chat_btn").addEventListener("click", function(){
    window.tidioChatApi.show();
    window.tidioChatApi.open();
  });
}
chatBtnFn()
</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>